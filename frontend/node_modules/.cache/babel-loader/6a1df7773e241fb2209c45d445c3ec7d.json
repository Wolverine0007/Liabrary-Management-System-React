{"ast":null,"code":"import _regeneratorRuntime from\"/Users/sanketbanate/Desktop/Project/Library-Management-System/frontend/node_modules/@babel/runtime/regenerator\";import _slicedToArray from\"/Users/sanketbanate/Desktop/Project/Library-Management-System/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import axios from'axios';import{Container,Typography,TextField,Button,Card,CardContent,Grid,Table,TableBody,TableCell,TableHead,TableRow}from'@material-ui/core';import'./Return.css';function Return(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),searchTerm=_useState2[0],setSearchTerm=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),selectedStudent=_useState4[0],setSelectedStudent=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),issuedBooks=_useState6[0],setIssuedBooks=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),message=_useState8[0],setMessage=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),fineInfo=_useState10[0],setFineInfo=_useState10[1];var searchStudent=function searchStudent(e){var response,studentsResponse,student,booksResponse;return _regeneratorRuntime.async(function searchStudent$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;if(isNaN(searchTerm)){_context.next=9;break;}_context.next=5;return _regeneratorRuntime.awrap(axios.get(\"/api/getIssues/\".concat(searchTerm)));case 5:response=_context.sent;if(response.data.length>0){setSelectedStudent({id:searchTerm,name:response.data[0].sname});setIssuedBooks(response.data);setMessage('');}else{setMessage('No books found for this student ID.');setSelectedStudent(null);setIssuedBooks([]);}_context.next=25;break;case 9:_context.next=11;return _regeneratorRuntime.awrap(axios.get(\"/api/searchStudentByName/\".concat(searchTerm)));case 11:studentsResponse=_context.sent;if(!(studentsResponse.data.length>0)){_context.next=22;break;}student=studentsResponse.data[0];_context.next=16;return _regeneratorRuntime.awrap(axios.get(\"/api/getIssues/\".concat(student.id)));case 16:booksResponse=_context.sent;setSelectedStudent(student);setIssuedBooks(booksResponse.data);setMessage('');_context.next=25;break;case 22:setMessage('No student found with this name.');setSelectedStudent(null);setIssuedBooks([]);case 25:_context.next=31;break;case 27:_context.prev=27;_context.t0=_context[\"catch\"](1);setMessage('Error searching for student. Please try again.');console.error('Error searching student:',_context.t0);case 31:case\"end\":return _context.stop();}}},null,null,[[1,27]]);};var calculateFine=function calculateFine(deadline){var deadlineDate=new Date(deadline);var currentDate=new Date();var timeDiff=currentDate-deadlineDate;var daysDiff=Math.ceil(timeDiff/(1000*60*60*24));return daysDiff>0?daysDiff*10:0;};var handleReturnBook=function handleReturnBook(bookId,bookName,deadline){var fine,response;return _regeneratorRuntime.async(function handleReturnBook$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;fine=calculateFine(deadline);_context2.next=4;return _regeneratorRuntime.awrap(axios.post('/api/return',{sid:selectedStudent.id,id:bookId}));case 4:if(fine>0){setFineInfo(\"Book \\\"\".concat(bookName,\"\\\" returned successfully! Fine applied: \\u20B9\").concat(fine));}else{setFineInfo(\"Book \\\"\".concat(bookName,\"\\\" returned successfully! No fine applied.\"));}// Refresh the issued books list\n_context2.next=7;return _regeneratorRuntime.awrap(axios.get(\"/api/getIssues/\".concat(selectedStudent.id)));case 7:response=_context2.sent;setIssuedBooks(response.data);_context2.next=15;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](0);setMessage('Error returning book. Please try again.');console.error('Error returning book:',_context2.t0);case 15:case\"end\":return _context2.stop();}}},null,null,[[0,11]]);};var resetSearch=function resetSearch(){setSearchTerm('');setSelectedStudent(null);setIssuedBooks([]);setMessage('');setFineInfo('');};return React.createElement(Container,{className:\"return-container\"},React.createElement(Typography,{variant:\"h4\",className:\"return-title\"},\"Return Books\"),React.createElement(Card,{className:\"return-card\"},React.createElement(CardContent,null,React.createElement(Typography,{variant:\"h6\"},\"Search Student\"),React.createElement(\"form\",{onSubmit:searchStudent},React.createElement(TextField,{label:\"Student ID or Name\",variant:\"outlined\",fullWidth:true,margin:\"normal\",value:searchTerm,onChange:function onChange(e){return setSearchTerm(e.target.value);},placeholder:\"Enter student ID (number) or student name\",required:true}),React.createElement(Grid,{container:true,spacing:2},React.createElement(Grid,{item:true,xs:6},React.createElement(Button,{type:\"submit\",variant:\"contained\",color:\"primary\",fullWidth:true,className:\"search-button\"},\"Search Student\")),React.createElement(Grid,{item:true,xs:6},React.createElement(Button,{variant:\"outlined\",color:\"secondary\",fullWidth:true,onClick:resetSearch},\"Reset\")))))),selectedStudent&&React.createElement(Card,{className:\"student-info-card\",style:{marginTop:'20px'}},React.createElement(CardContent,null,React.createElement(Typography,{variant:\"h6\"},\"Student: \",selectedStudent.name,\" (ID: \",selectedStudent.id,\")\"),issuedBooks.length>0?React.createElement(React.Fragment,null,React.createElement(Typography,{variant:\"subtitle1\",style:{marginTop:'15px'}},\"Books Currently Issued:\"),React.createElement(Table,null,React.createElement(TableHead,null,React.createElement(TableRow,null,React.createElement(TableCell,null,\"Book Name\"),React.createElement(TableCell,null,\"Author\"),React.createElement(TableCell,null,\"Issue Date\"),React.createElement(TableCell,null,\"Deadline\"),React.createElement(TableCell,null,\"Fine (\\u20B9)\"),React.createElement(TableCell,null,\"Action\"))),React.createElement(TableBody,null,issuedBooks.map(function(book,index){var fine=calculateFine(book.deadline);var isOverdue=fine>0;return React.createElement(TableRow,{key:index,style:{backgroundColor:isOverdue?'#ffebee':'inherit'}},React.createElement(TableCell,null,book.name),React.createElement(TableCell,null,book.author),React.createElement(TableCell,null,new Date(book.date).toLocaleDateString()),React.createElement(TableCell,{style:{color:isOverdue?'red':'inherit'}},new Date(book.deadline).toLocaleDateString()),React.createElement(TableCell,{style:{color:isOverdue?'red':'green'}},\"\\u20B9\",fine),React.createElement(TableCell,null,React.createElement(Button,{variant:\"contained\",color:\"primary\",size:\"small\",onClick:function onClick(){return handleReturnBook(book.id,book.name,book.deadline);}},\"Return\")));})))):React.createElement(Typography,{variant:\"body1\",style:{marginTop:'15px',color:'green'}},\"No books currently issued to this student.\"))),message&&React.createElement(Typography,{variant:\"body1\",className:message.includes('Error')?'error-message':'success-message',style:{marginTop:'15px'}},message),fineInfo&&React.createElement(Typography,{variant:\"body1\",style:{marginTop:'15px',color:'green',fontWeight:'bold'}},fineInfo));}export default Return;","map":{"version":3,"sources":["/Users/sanketbanate/Desktop/Project/Library-Management-System/frontend/src/components/Return/Return.js"],"names":["React","useState","axios","Container","Typography","TextField","Button","Card","CardContent","Grid","Table","TableBody","TableCell","TableHead","TableRow","Return","searchTerm","setSearchTerm","selectedStudent","setSelectedStudent","issuedBooks","setIssuedBooks","message","setMessage","fineInfo","setFineInfo","searchStudent","e","preventDefault","isNaN","get","response","data","length","id","name","sname","studentsResponse","student","booksResponse","console","error","calculateFine","deadline","deadlineDate","Date","currentDate","timeDiff","daysDiff","Math","ceil","handleReturnBook","bookId","bookName","fine","post","sid","resetSearch","target","value","marginTop","map","book","index","isOverdue","backgroundColor","author","date","toLocaleDateString","color","includes","fontWeight"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport axios from 'axios';\nimport { Container, Typography, TextField, Button, Card, CardContent, Grid, Table, TableBody, TableCell, TableHead, TableRow } from '@material-ui/core';\nimport './Return.css';\n\nfunction Return() {\n    const [searchTerm, setSearchTerm] = useState('');\n    const [selectedStudent, setSelectedStudent] = useState(null);\n    const [issuedBooks, setIssuedBooks] = useState([]);\n    const [message, setMessage] = useState('');\n    const [fineInfo, setFineInfo] = useState('');\n\n    const searchStudent = async (e) => {\n        e.preventDefault();\n        try {\n            // Search by ID first, then by name if ID search fails\n            let response;\n            if (!isNaN(searchTerm)) {\n                response = await axios.get(`/api/getIssues/${searchTerm}`);\n                if (response.data.length > 0) {\n                    setSelectedStudent({ id: searchTerm, name: response.data[0].sname });\n                    setIssuedBooks(response.data);\n                    setMessage('');\n                } else {\n                    setMessage('No books found for this student ID.');\n                    setSelectedStudent(null);\n                    setIssuedBooks([]);\n                }\n            } else {\n                // Search by name - we'll need to add this endpoint\n                const studentsResponse = await axios.get(`/api/searchStudentByName/${searchTerm}`);\n                if (studentsResponse.data.length > 0) {\n                    const student = studentsResponse.data[0];\n                    const booksResponse = await axios.get(`/api/getIssues/${student.id}`);\n                    setSelectedStudent(student);\n                    setIssuedBooks(booksResponse.data);\n                    setMessage('');\n                } else {\n                    setMessage('No student found with this name.');\n                    setSelectedStudent(null);\n                    setIssuedBooks([]);\n                }\n            }\n        } catch (error) {\n            setMessage('Error searching for student. Please try again.');\n            console.error('Error searching student:', error);\n        }\n    };\n\n    const calculateFine = (deadline) => {\n        const deadlineDate = new Date(deadline);\n        const currentDate = new Date();\n        const timeDiff = currentDate - deadlineDate;\n        const daysDiff = Math.ceil(timeDiff / (1000 * 60 * 60 * 24));\n        return daysDiff > 0 ? daysDiff * 10 : 0;\n    };\n\n    const handleReturnBook = async (bookId, bookName, deadline) => {\n        try {\n            const fine = calculateFine(deadline);\n            await axios.post('/api/return', {\n                sid: selectedStudent.id,\n                id: bookId\n            });\n            \n            if (fine > 0) {\n                setFineInfo(`Book \"${bookName}\" returned successfully! Fine applied: ₹${fine}`);\n            } else {\n                setFineInfo(`Book \"${bookName}\" returned successfully! No fine applied.`);\n            }\n            \n            // Refresh the issued books list\n            const response = await axios.get(`/api/getIssues/${selectedStudent.id}`);\n            setIssuedBooks(response.data);\n        } catch (error) {\n            setMessage('Error returning book. Please try again.');\n            console.error('Error returning book:', error);\n        }\n    };\n\n    const resetSearch = () => {\n        setSearchTerm('');\n        setSelectedStudent(null);\n        setIssuedBooks([]);\n        setMessage('');\n        setFineInfo('');\n    };\n\n    return (\n        <Container className=\"return-container\">\n            <Typography variant=\"h4\" className=\"return-title\">\n                Return Books\n            </Typography>\n            \n            <Card className=\"return-card\">\n                <CardContent>\n                    <Typography variant=\"h6\">Search Student</Typography>\n                    <form onSubmit={searchStudent}>\n                        <TextField\n                            label=\"Student ID or Name\"\n                            variant=\"outlined\"\n                            fullWidth\n                            margin=\"normal\"\n                            value={searchTerm}\n                            onChange={(e) => setSearchTerm(e.target.value)}\n                            placeholder=\"Enter student ID (number) or student name\"\n                            required\n                        />\n                        <Grid container spacing={2}>\n                            <Grid item xs={6}>\n                                <Button\n                                    type=\"submit\"\n                                    variant=\"contained\"\n                                    color=\"primary\"\n                                    fullWidth\n                                    className=\"search-button\"\n                                >\n                                    Search Student\n                                </Button>\n                            </Grid>\n                            <Grid item xs={6}>\n                                <Button\n                                    variant=\"outlined\"\n                                    color=\"secondary\"\n                                    fullWidth\n                                    onClick={resetSearch}\n                                >\n                                    Reset\n                                </Button>\n                            </Grid>\n                        </Grid>\n                    </form>\n                </CardContent>\n            </Card>\n\n            {selectedStudent && (\n                <Card className=\"student-info-card\" style={{marginTop: '20px'}}>\n                    <CardContent>\n                        <Typography variant=\"h6\">\n                            Student: {selectedStudent.name} (ID: {selectedStudent.id})\n                        </Typography>\n                        \n                        {issuedBooks.length > 0 ? (\n                            <>\n                                <Typography variant=\"subtitle1\" style={{marginTop: '15px'}}>\n                                    Books Currently Issued:\n                                </Typography>\n                                <Table>\n                                    <TableHead>\n                                        <TableRow>\n                                            <TableCell>Book Name</TableCell>\n                                            <TableCell>Author</TableCell>\n                                            <TableCell>Issue Date</TableCell>\n                                            <TableCell>Deadline</TableCell>\n                                            <TableCell>Fine (₹)</TableCell>\n                                            <TableCell>Action</TableCell>\n                                        </TableRow>\n                                    </TableHead>\n                                    <TableBody>\n                                        {issuedBooks.map((book, index) => {\n                                            const fine = calculateFine(book.deadline);\n                                            const isOverdue = fine > 0;\n                                            return (\n                                                <TableRow key={index} style={{backgroundColor: isOverdue ? '#ffebee' : 'inherit'}}>\n                                                    <TableCell>{book.name}</TableCell>\n                                                    <TableCell>{book.author}</TableCell>\n                                                    <TableCell>{new Date(book.date).toLocaleDateString()}</TableCell>\n                                                    <TableCell style={{color: isOverdue ? 'red' : 'inherit'}}>\n                                                        {new Date(book.deadline).toLocaleDateString()}\n                                                    </TableCell>\n                                                    <TableCell style={{color: isOverdue ? 'red' : 'green'}}>\n                                                        ₹{fine}\n                                                    </TableCell>\n                                                    <TableCell>\n                                                        <Button\n                                                            variant=\"contained\"\n                                                            color=\"primary\"\n                                                            size=\"small\"\n                                                            onClick={() => handleReturnBook(book.id, book.name, book.deadline)}\n                                                        >\n                                                            Return\n                                                        </Button>\n                                                    </TableCell>\n                                                </TableRow>\n                                            );\n                                        })}\n                                    </TableBody>\n                                </Table>\n                            </>\n                        ) : (\n                            <Typography variant=\"body1\" style={{marginTop: '15px', color: 'green'}}>\n                                No books currently issued to this student.\n                            </Typography>\n                        )}\n                    </CardContent>\n                </Card>\n            )}\n\n            {message && (\n                <Typography \n                    variant=\"body1\" \n                    className={message.includes('Error') ? 'error-message' : 'success-message'}\n                    style={{marginTop: '15px'}}\n                >\n                    {message}\n                </Typography>\n            )}\n            \n            {fineInfo && (\n                <Typography \n                    variant=\"body1\" \n                    style={{marginTop: '15px', color: 'green', fontWeight: 'bold'}}\n                >\n                    {fineInfo}\n                </Typography>\n            )}\n        </Container>\n    );\n}\n\nexport default Return;"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _classCallCheck from\"/Users/sanketbanate/Desktop/Project/Library-Management-System/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/sanketbanate/Desktop/Project/Library-Management-System/frontend/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/sanketbanate/Desktop/Project/Library-Management-System/frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/sanketbanate/Desktop/Project/Library-Management-System/frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/sanketbanate/Desktop/Project/Library-Management-System/frontend/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import axios from'axios';import'./search.css';var Search=/*#__PURE__*/function(_React$Component){_inherits(Search,_React$Component);function Search(){var _getPrototypeOf2;var _this;_classCallCheck(this,Search);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Search)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={searchType:'books',searchQuery:'',bookId:'',results:[],bookHolders:[],loading:false};_this.searchBooks=function(){if(!_this.state.searchQuery.trim())return;_this.setState({loading:true});axios.get(\"/api/searchBooks/\".concat(_this.state.searchQuery)).then(function(response){_this.setState({results:response.data,loading:false});}).catch(function(error){console.error('Error searching books:',error);_this.setState({loading:false});});};_this.searchStudents=function(){if(!_this.state.searchQuery.trim())return;_this.setState({loading:true});axios.get(\"/api/searchStudents/\".concat(_this.state.searchQuery)).then(function(response){_this.setState({results:response.data,loading:false});}).catch(function(error){console.error('Error searching students:',error);_this.setState({loading:false});});};_this.findBookHolders=function(){if(!_this.state.bookId.trim())return;_this.setState({loading:true});axios.get(\"/api/bookHolders/\".concat(_this.state.bookId)).then(function(response){_this.setState({bookHolders:response.data,loading:false});}).catch(function(error){console.error('Error finding book holders:',error);_this.setState({loading:false,bookHolders:[]});});};_this.handleSearch=function(){if(_this.state.searchType==='books'){_this.searchBooks();}else{_this.searchStudents();}};return _this;}_createClass(Search,[{key:\"render\",value:function render(){var _this2=this;return React.createElement(\"div\",{id:\"search\",className:\"text-center\"},React.createElement(\"h2\",null,\"Search Library\"),React.createElement(\"div\",{className:\"search-section\"},React.createElement(\"h3\",null,\"Search Books or Students\"),React.createElement(\"div\",{className:\"search-controls\"},React.createElement(\"select\",{value:this.state.searchType,onChange:function onChange(e){return _this2.setState({searchType:e.target.value,results:[]});}},React.createElement(\"option\",{value:\"books\"},\"Search Books\"),React.createElement(\"option\",{value:\"students\"},\"Search Students\")),React.createElement(\"input\",{type:\"text\",placeholder:this.state.searchType==='books'?'Enter book name or author...':'Enter student name...',value:this.state.searchQuery,onChange:function onChange(e){return _this2.setState({searchQuery:e.target.value});}}),React.createElement(\"button\",{onClick:this.handleSearch},\"Search\"))),React.createElement(\"div\",{className:\"book-holders-section\"},React.createElement(\"h3\",null,\"Find Who Has a Book\"),React.createElement(\"div\",{className:\"search-controls\"},React.createElement(\"input\",{type:\"number\",placeholder:\"Enter Book ID...\",value:this.state.bookId,onChange:function onChange(e){return _this2.setState({bookId:e.target.value});},min:\"1\"}),React.createElement(\"button\",{onClick:this.findBookHolders},\"Find Holders\"))),this.state.loading&&React.createElement(\"p\",null,\"Loading...\"),this.state.results.length>0&&React.createElement(\"div\",{className:\"search-results\"},React.createElement(\"h3\",null,this.state.searchType==='books'?'Book Results':'Student Results'),React.createElement(\"table\",{className:\"table table-hover\"},React.createElement(\"thead\",null,React.createElement(\"tr\",null,this.state.searchType==='books'?React.createElement(React.Fragment,null,React.createElement(\"th\",null,\"ID\"),React.createElement(\"th\",null,\"Book Name\"),React.createElement(\"th\",null,\"Author\"),React.createElement(\"th\",null,\"Available Count\")):React.createElement(React.Fragment,null,React.createElement(\"th\",null,\"ID\"),React.createElement(\"th\",null,\"Student Name\"),React.createElement(\"th\",null,\"Fine\")))),React.createElement(\"tbody\",null,this.state.results.map(function(item){return React.createElement(\"tr\",{key:item.id},_this2.state.searchType==='books'?React.createElement(React.Fragment,null,React.createElement(\"td\",null,item.id),React.createElement(\"td\",null,item.name.toUpperCase()),React.createElement(\"td\",null,item.author),React.createElement(\"td\",null,item.book_count)):React.createElement(React.Fragment,null,React.createElement(\"td\",null,item.id),React.createElement(\"td\",null,item.name.toUpperCase()),React.createElement(\"td\",null,\"$\",item.fine)));})))),this.state.bookHolders.length>0&&React.createElement(\"div\",{className:\"book-holders-results\"},React.createElement(\"h3\",null,\"Students Who Have This Book\"),React.createElement(\"table\",{className:\"table table-hover\"},React.createElement(\"thead\",null,React.createElement(\"tr\",null,React.createElement(\"th\",null,\"Student ID\"),React.createElement(\"th\",null,\"Student Name\"),React.createElement(\"th\",null,\"Issue Date\"),React.createElement(\"th\",null,\"Return Deadline\"))),React.createElement(\"tbody\",null,this.state.bookHolders.map(function(holder){return React.createElement(\"tr\",{key:holder.id},React.createElement(\"td\",null,holder.id),React.createElement(\"td\",null,holder.name.toUpperCase()),React.createElement(\"td\",null,new Date(holder.date).toLocaleDateString()),React.createElement(\"td\",null,new Date(holder.deadline).toLocaleDateString()));})))),this.state.bookHolders.length===0&&this.state.bookId&&!this.state.loading&&React.createElement(\"p\",null,\"No one has issued this book or book not found\"));}}]);return Search;}(React.Component);export default Search;","map":{"version":3,"sources":["/Users/sanketbanate/Desktop/Project/Library-Management-System/frontend/src/components/search/search.js"],"names":["React","axios","Search","state","searchType","searchQuery","bookId","results","bookHolders","loading","searchBooks","trim","setState","get","then","response","data","catch","error","console","searchStudents","findBookHolders","handleSearch","e","target","value","length","map","item","id","name","toUpperCase","author","book_count","fine","holder","Date","date","toLocaleDateString","deadline","Component"],"mappings":"2wBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAO,cAAP,C,GAEMC,CAAAA,M,2YAEFC,K,CAAQ,CACJC,UAAU,CAAE,OADR,CAEJC,WAAW,CAAE,EAFT,CAGJC,MAAM,CAAE,EAHJ,CAIJC,OAAO,CAAE,EAJL,CAKJC,WAAW,CAAE,EALT,CAMJC,OAAO,CAAE,KANL,C,OASRC,W,CAAc,UAAM,CAChB,GAAI,CAAC,MAAKP,KAAL,CAAWE,WAAX,CAAuBM,IAAvB,EAAL,CAAoC,OAEpC,MAAKC,QAAL,CAAc,CAAEH,OAAO,CAAE,IAAX,CAAd,EACAR,KAAK,CAACY,GAAN,4BAA8B,MAAKV,KAAL,CAAWE,WAAzC,GACKS,IADL,CACU,SAAAC,QAAQ,CAAI,CACd,MAAKH,QAAL,CAAc,CAAEL,OAAO,CAAEQ,QAAQ,CAACC,IAApB,CAA0BP,OAAO,CAAE,KAAnC,CAAd,EACH,CAHL,EAIKQ,KAJL,CAIW,SAAAC,KAAK,CAAI,CACZC,OAAO,CAACD,KAAR,CAAc,wBAAd,CAAwCA,KAAxC,EACA,MAAKN,QAAL,CAAc,CAAEH,OAAO,CAAE,KAAX,CAAd,EACH,CAPL,EAQH,C,OAEDW,c,CAAiB,UAAM,CACnB,GAAI,CAAC,MAAKjB,KAAL,CAAWE,WAAX,CAAuBM,IAAvB,EAAL,CAAoC,OAEpC,MAAKC,QAAL,CAAc,CAAEH,OAAO,CAAE,IAAX,CAAd,EACAR,KAAK,CAACY,GAAN,+BAAiC,MAAKV,KAAL,CAAWE,WAA5C,GACKS,IADL,CACU,SAAAC,QAAQ,CAAI,CACd,MAAKH,QAAL,CAAc,CAAEL,OAAO,CAAEQ,QAAQ,CAACC,IAApB,CAA0BP,OAAO,CAAE,KAAnC,CAAd,EACH,CAHL,EAIKQ,KAJL,CAIW,SAAAC,KAAK,CAAI,CACZC,OAAO,CAACD,KAAR,CAAc,2BAAd,CAA2CA,KAA3C,EACA,MAAKN,QAAL,CAAc,CAAEH,OAAO,CAAE,KAAX,CAAd,EACH,CAPL,EAQH,C,OAEDY,e,CAAkB,UAAM,CACpB,GAAI,CAAC,MAAKlB,KAAL,CAAWG,MAAX,CAAkBK,IAAlB,EAAL,CAA+B,OAE/B,MAAKC,QAAL,CAAc,CAAEH,OAAO,CAAE,IAAX,CAAd,EACAR,KAAK,CAACY,GAAN,4BAA8B,MAAKV,KAAL,CAAWG,MAAzC,GACKQ,IADL,CACU,SAAAC,QAAQ,CAAI,CACd,MAAKH,QAAL,CAAc,CAAEJ,WAAW,CAAEO,QAAQ,CAACC,IAAxB,CAA8BP,OAAO,CAAE,KAAvC,CAAd,EACH,CAHL,EAIKQ,KAJL,CAIW,SAAAC,KAAK,CAAI,CACZC,OAAO,CAACD,KAAR,CAAc,6BAAd,CAA6CA,KAA7C,EACA,MAAKN,QAAL,CAAc,CAAEH,OAAO,CAAE,KAAX,CAAkBD,WAAW,CAAE,EAA/B,CAAd,EACH,CAPL,EAQH,C,OAEDc,Y,CAAe,UAAM,CACjB,GAAI,MAAKnB,KAAL,CAAWC,UAAX,GAA0B,OAA9B,CAAuC,CACnC,MAAKM,WAAL,GACH,CAFD,IAEO,CACH,MAAKU,cAAL,GACH,CACJ,C,yEAEQ,iBACL,MACI,4BAAK,EAAE,CAAC,QAAR,CAAiB,SAAS,CAAC,aAA3B,EACI,+CADJ,CAGI,2BAAK,SAAS,CAAC,gBAAf,EACI,yDADJ,CAEI,2BAAK,SAAS,CAAC,iBAAf,EACI,8BACI,KAAK,CAAE,KAAKjB,KAAL,CAAWC,UADtB,CAEI,QAAQ,CAAE,kBAACmB,CAAD,QAAO,CAAA,MAAI,CAACX,QAAL,CAAc,CAAER,UAAU,CAAEmB,CAAC,CAACC,MAAF,CAASC,KAAvB,CAA8BlB,OAAO,CAAE,EAAvC,CAAd,CAAP,EAFd,EAII,8BAAQ,KAAK,CAAC,OAAd,iBAJJ,CAKI,8BAAQ,KAAK,CAAC,UAAd,oBALJ,CADJ,CAQI,6BACI,IAAI,CAAC,MADT,CAEI,WAAW,CAAE,KAAKJ,KAAL,CAAWC,UAAX,GAA0B,OAA1B,CAAoC,8BAApC,CAAqE,uBAFtF,CAGI,KAAK,CAAE,KAAKD,KAAL,CAAWE,WAHtB,CAII,QAAQ,CAAE,kBAACkB,CAAD,QAAO,CAAA,MAAI,CAACX,QAAL,CAAc,CAAEP,WAAW,CAAEkB,CAAC,CAACC,MAAF,CAASC,KAAxB,CAAd,CAAP,EAJd,EARJ,CAcI,8BAAQ,OAAO,CAAE,KAAKH,YAAtB,WAdJ,CAFJ,CAHJ,CAuBI,2BAAK,SAAS,CAAC,sBAAf,EACI,oDADJ,CAEI,2BAAK,SAAS,CAAC,iBAAf,EACI,6BACI,IAAI,CAAC,QADT,CAEI,WAAW,CAAC,kBAFhB,CAGI,KAAK,CAAE,KAAKnB,KAAL,CAAWG,MAHtB,CAII,QAAQ,CAAE,kBAACiB,CAAD,QAAO,CAAA,MAAI,CAACX,QAAL,CAAc,CAAEN,MAAM,CAAEiB,CAAC,CAACC,MAAF,CAASC,KAAnB,CAAd,CAAP,EAJd,CAKI,GAAG,CAAC,GALR,EADJ,CAQI,8BAAQ,OAAO,CAAE,KAAKJ,eAAtB,iBARJ,CAFJ,CAvBJ,CAqCK,KAAKlB,KAAL,CAAWM,OAAX,EAAsB,0CArC3B,CAuCK,KAAKN,KAAL,CAAWI,OAAX,CAAmBmB,MAAnB,CAA4B,CAA5B,EACG,2BAAK,SAAS,CAAC,gBAAf,EACI,8BAAK,KAAKvB,KAAL,CAAWC,UAAX,GAA0B,OAA1B,CAAoC,cAApC,CAAqD,iBAA1D,CADJ,CAEI,6BAAO,SAAS,CAAC,mBAAjB,EACI,iCACI,8BACK,KAAKD,KAAL,CAAWC,UAAX,GAA0B,OAA1B,CACG,wCACI,mCADJ,CAEI,0CAFJ,CAGI,uCAHJ,CAII,gDAJJ,CADH,CAQG,wCACI,mCADJ,CAEI,6CAFJ,CAGI,qCAHJ,CATR,CADJ,CADJ,CAmBI,iCACK,KAAKD,KAAL,CAAWI,OAAX,CAAmBoB,GAAnB,CAAuB,SAAAC,IAAI,QACxB,2BAAI,GAAG,CAAEA,IAAI,CAACC,EAAd,EACK,MAAI,CAAC1B,KAAL,CAAWC,UAAX,GAA0B,OAA1B,CACG,wCACI,8BAAKwB,IAAI,CAACC,EAAV,CADJ,CAEI,8BAAKD,IAAI,CAACE,IAAL,CAAUC,WAAV,EAAL,CAFJ,CAGI,8BAAKH,IAAI,CAACI,MAAV,CAHJ,CAII,8BAAKJ,IAAI,CAACK,UAAV,CAJJ,CADH,CAQG,wCACI,8BAAKL,IAAI,CAACC,EAAV,CADJ,CAEI,8BAAKD,IAAI,CAACE,IAAL,CAAUC,WAAV,EAAL,CAFJ,CAGI,kCAAMH,IAAI,CAACM,IAAX,CAHJ,CATR,CADwB,EAA3B,CADL,CAnBJ,CAFJ,CAxCR,CAqFK,KAAK/B,KAAL,CAAWK,WAAX,CAAuBkB,MAAvB,CAAgC,CAAhC,EACG,2BAAK,SAAS,CAAC,sBAAf,EACI,4DADJ,CAEI,6BAAO,SAAS,CAAC,mBAAjB,EACI,iCACI,8BACI,2CADJ,CAEI,6CAFJ,CAGI,2CAHJ,CAII,gDAJJ,CADJ,CADJ,CASI,iCACK,KAAKvB,KAAL,CAAWK,WAAX,CAAuBmB,GAAvB,CAA2B,SAAAQ,MAAM,QAC9B,2BAAI,GAAG,CAAEA,MAAM,CAACN,EAAhB,EACI,8BAAKM,MAAM,CAACN,EAAZ,CADJ,CAEI,8BAAKM,MAAM,CAACL,IAAP,CAAYC,WAAZ,EAAL,CAFJ,CAGI,8BAAK,GAAIK,CAAAA,IAAJ,CAASD,MAAM,CAACE,IAAhB,EAAsBC,kBAAtB,EAAL,CAHJ,CAII,8BAAK,GAAIF,CAAAA,IAAJ,CAASD,MAAM,CAACI,QAAhB,EAA0BD,kBAA1B,EAAL,CAJJ,CAD8B,EAAjC,CADL,CATJ,CAFJ,CAtFR,CA+GK,KAAKnC,KAAL,CAAWK,WAAX,CAAuBkB,MAAvB,GAAkC,CAAlC,EAAuC,KAAKvB,KAAL,CAAWG,MAAlD,EAA4D,CAAC,KAAKH,KAAL,CAAWM,OAAxE,EACG,6EAhHR,CADJ,CAqHH,C,oBAnLgBT,KAAK,CAACwC,S,EAuL3B,cAAetC,CAAAA,MAAf","sourcesContent":["import React from 'react';\r\nimport axios from 'axios';\r\nimport './search.css';\r\n\r\nclass Search extends React.Component {\r\n    \r\n    state = {\r\n        searchType: 'books',\r\n        searchQuery: '',\r\n        bookId: '',\r\n        results: [],\r\n        bookHolders: [],\r\n        loading: false\r\n    };\r\n\r\n    searchBooks = () => {\r\n        if (!this.state.searchQuery.trim()) return;\r\n        \r\n        this.setState({ loading: true });\r\n        axios.get(`/api/searchBooks/${this.state.searchQuery}`)\r\n            .then(response => {\r\n                this.setState({ results: response.data, loading: false });\r\n            })\r\n            .catch(error => {\r\n                console.error('Error searching books:', error);\r\n                this.setState({ loading: false });\r\n            });\r\n    }\r\n\r\n    searchStudents = () => {\r\n        if (!this.state.searchQuery.trim()) return;\r\n        \r\n        this.setState({ loading: true });\r\n        axios.get(`/api/searchStudents/${this.state.searchQuery}`)\r\n            .then(response => {\r\n                this.setState({ results: response.data, loading: false });\r\n            })\r\n            .catch(error => {\r\n                console.error('Error searching students:', error);\r\n                this.setState({ loading: false });\r\n            });\r\n    }\r\n\r\n    findBookHolders = () => {\r\n        if (!this.state.bookId.trim()) return;\r\n        \r\n        this.setState({ loading: true });\r\n        axios.get(`/api/bookHolders/${this.state.bookId}`)\r\n            .then(response => {\r\n                this.setState({ bookHolders: response.data, loading: false });\r\n            })\r\n            .catch(error => {\r\n                console.error('Error finding book holders:', error);\r\n                this.setState({ loading: false, bookHolders: [] });\r\n            });\r\n    }\r\n\r\n    handleSearch = () => {\r\n        if (this.state.searchType === 'books') {\r\n            this.searchBooks();\r\n        } else {\r\n            this.searchStudents();\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div id='search' className=\"text-center\">\r\n                <h2>Search Library</h2>\r\n                \r\n                <div className=\"search-section\">\r\n                    <h3>Search Books or Students</h3>\r\n                    <div className=\"search-controls\">\r\n                        <select \r\n                            value={this.state.searchType} \r\n                            onChange={(e) => this.setState({ searchType: e.target.value, results: [] })}\r\n                        >\r\n                            <option value=\"books\">Search Books</option>\r\n                            <option value=\"students\">Search Students</option>\r\n                        </select>\r\n                        <input\r\n                            type=\"text\"\r\n                            placeholder={this.state.searchType === 'books' ? 'Enter book name or author...' : 'Enter student name...'}\r\n                            value={this.state.searchQuery}\r\n                            onChange={(e) => this.setState({ searchQuery: e.target.value })}\r\n                        />\r\n                        <button onClick={this.handleSearch}>Search</button>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"book-holders-section\">\r\n                    <h3>Find Who Has a Book</h3>\r\n                    <div className=\"search-controls\">\r\n                        <input\r\n                            type=\"number\"\r\n                            placeholder=\"Enter Book ID...\"\r\n                            value={this.state.bookId}\r\n                            onChange={(e) => this.setState({ bookId: e.target.value })}\r\n                            min=\"1\"\r\n                        />\r\n                        <button onClick={this.findBookHolders}>Find Holders</button>\r\n                    </div>\r\n                </div>\r\n\r\n                {this.state.loading && <p>Loading...</p>}\r\n\r\n                {this.state.results.length > 0 && (\r\n                    <div className=\"search-results\">\r\n                        <h3>{this.state.searchType === 'books' ? 'Book Results' : 'Student Results'}</h3>\r\n                        <table className=\"table table-hover\">\r\n                            <thead>\r\n                                <tr>\r\n                                    {this.state.searchType === 'books' ? (\r\n                                        <>\r\n                                            <th>ID</th>\r\n                                            <th>Book Name</th>\r\n                                            <th>Author</th>\r\n                                            <th>Available Count</th>\r\n                                        </>\r\n                                    ) : (\r\n                                        <>\r\n                                            <th>ID</th>\r\n                                            <th>Student Name</th>\r\n                                            <th>Fine</th>\r\n                                        </>\r\n                                    )}\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                {this.state.results.map(item => (\r\n                                    <tr key={item.id}>\r\n                                        {this.state.searchType === 'books' ? (\r\n                                            <>\r\n                                                <td>{item.id}</td>\r\n                                                <td>{item.name.toUpperCase()}</td>\r\n                                                <td>{item.author}</td>\r\n                                                <td>{item.book_count}</td>\r\n                                            </>\r\n                                        ) : (\r\n                                            <>\r\n                                                <td>{item.id}</td>\r\n                                                <td>{item.name.toUpperCase()}</td>\r\n                                                <td>${item.fine}</td>\r\n                                            </>\r\n                                        )}\r\n                                    </tr>\r\n                                ))}\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                )}\r\n\r\n                {this.state.bookHolders.length > 0 && (\r\n                    <div className=\"book-holders-results\">\r\n                        <h3>Students Who Have This Book</h3>\r\n                        <table className=\"table table-hover\">\r\n                            <thead>\r\n                                <tr>\r\n                                    <th>Student ID</th>\r\n                                    <th>Student Name</th>\r\n                                    <th>Issue Date</th>\r\n                                    <th>Return Deadline</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                {this.state.bookHolders.map(holder => (\r\n                                    <tr key={holder.id}>\r\n                                        <td>{holder.id}</td>\r\n                                        <td>{holder.name.toUpperCase()}</td>\r\n                                        <td>{new Date(holder.date).toLocaleDateString()}</td>\r\n                                        <td>{new Date(holder.deadline).toLocaleDateString()}</td>\r\n                                    </tr>\r\n                                ))}\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                )}\r\n\r\n                {this.state.bookHolders.length === 0 && this.state.bookId && !this.state.loading && (\r\n                    <p>No one has issued this book or book not found</p>\r\n                )}\r\n            </div>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nexport default Search;"]},"metadata":{},"sourceType":"module"}
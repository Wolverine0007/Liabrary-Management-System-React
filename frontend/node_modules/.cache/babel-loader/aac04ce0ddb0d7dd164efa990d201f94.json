{"ast":null,"code":"var _jsxFileName = \"/Users/sanketbanate/Desktop/Project/Library-Management-System/frontend/src/components/Dashboard/Dashboard.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport './Dashboard.css';\n\nclass Dashboard extends Component {\n  constructor(props) {\n    super(props);\n\n    this.fetchDashboardData = () => {\n      Promise.all([axios.get('/api/dashboard'), axios.get('/api/overdueBooks'), axios.get('/api/studentsWithFines')]).then(([analyticsRes, overdueRes, finesRes]) => {\n        console.log('Dashboard data:', {\n          analytics: analyticsRes.data,\n          overdueBooks: overdueRes.data,\n          studentsWithFines: finesRes.data\n        });\n        this.setState({\n          analytics: analyticsRes.data,\n          overdueBooks: overdueRes.data,\n          studentsWithFines: finesRes.data,\n          loading: false\n        });\n      }).catch(error => {\n        console.error('Error fetching dashboard data:', error);\n        this.setState({\n          loading: false\n        });\n      });\n    };\n\n    this.state = {\n      analytics: {},\n      overdueBooks: [],\n      studentsWithFines: [],\n      loading: true\n    };\n  }\n\n  componentDidMount() {\n    this.fetchDashboardData();\n  }\n\n  render() {\n    const _this$state = this.state,\n          analytics = _this$state.analytics,\n          overdueBooks = _this$state.overdueBooks,\n          studentsWithFines = _this$state.studentsWithFines,\n          loading = _this$state.loading;\n    if (loading) return React.createElement(\"div\", {\n      className: \"loading\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48\n      },\n      __self: this\n    }, \"Loading Dashboard...\");\n    return React.createElement(\"div\", {\n      className: \"dashboard\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52\n      },\n      __self: this\n    }, \"Library Dashboard\"), React.createElement(\"div\", {\n      style: {\n        marginBottom: '20px',\n        padding: '10px',\n        backgroundColor: '#f8f9fa',\n        borderRadius: '5px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56\n      },\n      __self: this\n    }, \"Test Data (for development):\")), React.createElement(\"button\", {\n      onClick: () => {\n        // Add fines to some students\n        axios.post('/api/addTestFines').then(() => {\n          alert('Test fines added!');\n          this.fetchDashboardData();\n        }).catch(err => console.error('Error:', err));\n      },\n      style: {\n        marginRight: '10px',\n        padding: '5px 10px',\n        backgroundColor: '#28a745',\n        color: 'white',\n        border: 'none',\n        borderRadius: '3px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }, \"Add Test Fines\"), React.createElement(\"button\", {\n      onClick: () => {\n        // Create overdue books by issuing books with past deadlines\n        axios.post('/api/createOverdueBooks').then(() => {\n          alert('Test overdue books created!');\n          this.fetchDashboardData();\n        }).catch(err => console.error('Error:', err));\n      },\n      style: {\n        padding: '5px 10px',\n        backgroundColor: '#dc3545',\n        color: 'white',\n        border: 'none',\n        borderRadius: '3px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, \"Create Overdue Books\")), React.createElement(\"div\", {\n      className: \"stats-grid\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"stat-card\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, \"Total Books\"), React.createElement(\"div\", {\n      className: \"stat-number\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, analytics.totalBooks || 0)), React.createElement(\"div\", {\n      className: \"stat-card\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, \"Available Books\"), React.createElement(\"div\", {\n      className: \"stat-number\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, analytics.availableBooks || 0)), React.createElement(\"div\", {\n      className: \"stat-card\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, \"Total Students\"), React.createElement(\"div\", {\n      className: \"stat-number\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, analytics.totalStudents || 0)), React.createElement(\"div\", {\n      className: \"stat-card\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, \"Books Borrowed\"), React.createElement(\"div\", {\n      className: \"stat-number\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, analytics.totalBorrowed || 0)), React.createElement(\"div\", {\n      className: \"stat-card overdue\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, \"Overdue Books\"), React.createElement(\"div\", {\n      className: \"stat-number\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, analytics.overdueBooks || 0)), React.createElement(\"div\", {\n      className: \"stat-card fines\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, \"Total Fines\"), React.createElement(\"div\", {\n      className: \"stat-number\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, \"\\u20B9\", analytics.totalFines || 0))), React.createElement(\"div\", {\n      className: \"dashboard-sections\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"section\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, \"Overdue Books\"), overdueBooks.length === 0 ? React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, \"No overdue books\") : React.createElement(\"table\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, \"Student\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, \"Book\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, \"Days Overdue\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, \"Deadline\"))), React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, overdueBooks.slice(0, 5).map((book, index) => React.createElement(\"tr\", {\n      key: index,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, book.studentName), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, book.bookName), React.createElement(\"td\", {\n      className: \"overdue-days\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, book.daysOverdue), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, new Date(book.deadline).toLocaleDateString())))))), React.createElement(\"div\", {\n      className: \"section\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, \"Students with Fines\"), studentsWithFines.length === 0 ? React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, \"No outstanding fines\") : React.createElement(\"table\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, \"Student Name\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, \"Recorded Fine\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, \"Pending Fine\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, \"Total\"))), React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, studentsWithFines.slice(0, 5).map(student => {\n      const pendingFine = overdueBooks.filter(book => book.studentName === student.name).reduce((total, book) => total + Math.max(0, book.daysOverdue) * 10, 0);\n      const recordedFine = parseFloat(student.fine) || 0;\n      const totalFine = recordedFine + pendingFine;\n      return React.createElement(\"tr\", {\n        key: student.id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }, student.name), React.createElement(\"td\", {\n        className: \"fine-amount\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, \"\\u20B9\", recordedFine.toFixed(2)), React.createElement(\"td\", {\n        className: \"pending-fine\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, \"\\u20B9\", pendingFine.toFixed(2)), React.createElement(\"td\", {\n        className: \"total-fine\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, \"\\u20B9\", totalFine.toFixed(2))));\n    }))))));\n  }\n\n}\n\nexport default Dashboard;","map":{"version":3,"sources":["/Users/sanketbanate/Desktop/Project/Library-Management-System/frontend/src/components/Dashboard/Dashboard.js"],"names":["React","Component","axios","Dashboard","constructor","props","fetchDashboardData","Promise","all","get","then","analyticsRes","overdueRes","finesRes","console","log","analytics","data","overdueBooks","studentsWithFines","setState","loading","catch","error","state","componentDidMount","render","marginBottom","padding","backgroundColor","borderRadius","post","alert","err","marginRight","color","border","totalBooks","availableBooks","totalStudents","totalBorrowed","totalFines","length","slice","map","book","index","studentName","bookName","daysOverdue","Date","deadline","toLocaleDateString","student","pendingFine","filter","name","reduce","total","Math","max","recordedFine","parseFloat","fine","totalFine","id","toFixed"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport './Dashboard.css';\n\nclass Dashboard extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            analytics: {},\n            overdueBooks: [],\n            studentsWithFines: [],\n            loading: true\n        };\n    }\n\n    componentDidMount() {\n        this.fetchDashboardData();\n    }\n\n    fetchDashboardData = () => {\n        Promise.all([\n            axios.get('/api/dashboard'),\n            axios.get('/api/overdueBooks'),\n            axios.get('/api/studentsWithFines')\n        ])\n        .then(([analyticsRes, overdueRes, finesRes]) => {\n            console.log('Dashboard data:', {\n                analytics: analyticsRes.data,\n                overdueBooks: overdueRes.data,\n                studentsWithFines: finesRes.data\n            });\n            this.setState({\n                analytics: analyticsRes.data,\n                overdueBooks: overdueRes.data,\n                studentsWithFines: finesRes.data,\n                loading: false\n            });\n        })\n        .catch(error => {\n            console.error('Error fetching dashboard data:', error);\n            this.setState({ loading: false });\n        });\n    }\n\n    render() {\n        const { analytics, overdueBooks, studentsWithFines, loading } = this.state;\n\n        if (loading) return <div className=\"loading\">Loading Dashboard...</div>;\n\n        return (\n            <div className=\"dashboard\">\n                <h2>Library Dashboard</h2>\n                \n                {/* Temporary test buttons - remove after testing */}\n                <div style={{marginBottom: '20px', padding: '10px', backgroundColor: '#f8f9fa', borderRadius: '5px'}}>\n                    <p><strong>Test Data (for development):</strong></p>\n                    <button \n                        onClick={() => {\n                            // Add fines to some students\n                            axios.post('/api/addTestFines')\n                                .then(() => {\n                                    alert('Test fines added!');\n                                    this.fetchDashboardData();\n                                })\n                                .catch(err => console.error('Error:', err));\n                        }}\n                        style={{marginRight: '10px', padding: '5px 10px', backgroundColor: '#28a745', color: 'white', border: 'none', borderRadius: '3px'}}\n                    >\n                        Add Test Fines\n                    </button>\n                    <button \n                        onClick={() => {\n                            // Create overdue books by issuing books with past deadlines\n                            axios.post('/api/createOverdueBooks')\n                                .then(() => {\n                                    alert('Test overdue books created!');\n                                    this.fetchDashboardData();\n                                })\n                                .catch(err => console.error('Error:', err));\n                        }}\n                        style={{padding: '5px 10px', backgroundColor: '#dc3545', color: 'white', border: 'none', borderRadius: '3px'}}\n                    >\n                        Create Overdue Books\n                    </button>\n                </div>\n                \n                <div className=\"stats-grid\">\n                    <div className=\"stat-card\">\n                        <h3>Total Books</h3>\n                        <div className=\"stat-number\">{analytics.totalBooks || 0}</div>\n                    </div>\n                    <div className=\"stat-card\">\n                        <h3>Available Books</h3>\n                        <div className=\"stat-number\">{analytics.availableBooks || 0}</div>\n                    </div>\n                    <div className=\"stat-card\">\n                        <h3>Total Students</h3>\n                        <div className=\"stat-number\">{analytics.totalStudents || 0}</div>\n                    </div>\n                    <div className=\"stat-card\">\n                        <h3>Books Borrowed</h3>\n                        <div className=\"stat-number\">{analytics.totalBorrowed || 0}</div>\n                    </div>\n                    <div className=\"stat-card overdue\">\n                        <h3>Overdue Books</h3>\n                        <div className=\"stat-number\">{analytics.overdueBooks || 0}</div>\n                    </div>\n                    <div className=\"stat-card fines\">\n                        <h3>Total Fines</h3>\n                        <div className=\"stat-number\">₹{analytics.totalFines || 0}</div>\n                    </div>\n                </div>\n\n                <div className=\"dashboard-sections\">\n                    <div className=\"section\">\n                        <h3>Overdue Books</h3>\n                        {overdueBooks.length === 0 ? (\n                            <p>No overdue books</p>\n                        ) : (\n                            <table>\n                                <thead>\n                                    <tr>\n                                        <th>Student</th>\n                                        <th>Book</th>\n                                        <th>Days Overdue</th>\n                                        <th>Deadline</th>\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                    {overdueBooks.slice(0, 5).map((book, index) => (\n                                        <tr key={index}>\n                                            <td>{book.studentName}</td>\n                                            <td>{book.bookName}</td>\n                                            <td className=\"overdue-days\">{book.daysOverdue}</td>\n                                            <td>{new Date(book.deadline).toLocaleDateString()}</td>\n                                        </tr>\n                                    ))}\n                                </tbody>\n                            </table>\n                        )}\n                    </div>\n\n                    <div className=\"section\">\n                        <h3>Students with Fines</h3>\n                        {studentsWithFines.length === 0 ? (\n                            <p>No outstanding fines</p>\n                        ) : (\n                            <table>\n                                <thead>\n                                    <tr>\n                                        <th>Student Name</th>\n                                        <th>Recorded Fine</th>\n                                        <th>Pending Fine</th>\n                                        <th>Total</th>\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                    {studentsWithFines.slice(0, 5).map(student => {\n                                        const pendingFine = overdueBooks\n                                            .filter(book => book.studentName === student.name)\n                                            .reduce((total, book) => total + (Math.max(0, book.daysOverdue) * 10), 0);\n                                        const recordedFine = parseFloat(student.fine) || 0;\n                                        const totalFine = recordedFine + pendingFine;\n                                        \n                                        return (\n                                            <tr key={student.id}>\n                                                <td>{student.name}</td>\n                                                <td className=\"fine-amount\">₹{recordedFine.toFixed(2)}</td>\n                                                <td className=\"pending-fine\">₹{pendingFine.toFixed(2)}</td>\n                                                <td className=\"total-fine\"><strong>₹{totalFine.toFixed(2)}</strong></td>\n                                            </tr>\n                                        );\n                                    })}\n                                </tbody>\n                            </table>\n                        )}\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Dashboard;"]},"metadata":{},"sourceType":"module"}
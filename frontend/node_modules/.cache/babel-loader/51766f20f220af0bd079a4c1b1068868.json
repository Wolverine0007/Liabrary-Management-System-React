{"ast":null,"code":"import _classCallCheck from\"/Users/sanketbanate/Desktop/Project/Library-Management-System/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/sanketbanate/Desktop/Project/Library-Management-System/frontend/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/sanketbanate/Desktop/Project/Library-Management-System/frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/sanketbanate/Desktop/Project/Library-Management-System/frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/sanketbanate/Desktop/Project/Library-Management-System/frontend/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import axios from'axios';import'./Students.css';var Students=/*#__PURE__*/function(_Component){_inherits(Students,_Component);function Students(props){var _this;_classCallCheck(this,Students);_this=_possibleConstructorReturn(this,_getPrototypeOf(Students).call(this,props));_this.fetchStudents=function(){_this.setState({loading:true});axios.get('/api/getStudents').then(function(response){_this.setState({students:response.data,loading:false});}).catch(function(error){console.error('Error fetching students:',error);_this.setState({loading:false});});};_this.addStudent=function(e){e.preventDefault();if(!_this.state.newStudentName.trim())return;axios.post('/api/addStudent',{name:_this.state.newStudentName}).then(function(response){_this.setState({newStudentName:''});_this.fetchStudents();alert('Student added successfully!');}).catch(function(error){console.error('Error adding student:',error);alert('Failed to add student');});};_this.searchStudents=function(){if(!_this.state.searchQuery.trim()){_this.fetchStudents();return;}axios.get(\"/api/searchStudents/\".concat(_this.state.searchQuery)).then(function(response){_this.setState({students:response.data});}).catch(function(error){console.error('Error searching students:',error);});};_this.viewStudentDetails=function(studentId){axios.get(\"/api/getStudent/\".concat(studentId)).then(function(response){_this.setState({selectedStudent:response.data});}).catch(function(error){console.error('Error fetching student details:',error);});};_this.editStudent=function(student){_this.setState({editingStudent:student,editName:student.name,editFine:student.fine.toString()});};_this.updateStudent=function(){var _this$state=_this.state,editingStudent=_this$state.editingStudent,editName=_this$state.editName,editFine=_this$state.editFine;if(!editName.trim()){alert('Student name is required');return;}axios.put(\"/api/updateStudent/\".concat(editingStudent.id),{name:editName,fine:parseFloat(editFine)||0}).then(function(response){alert('Student updated successfully!');_this.setState({editingStudent:null,editName:'',editFine:''});_this.fetchStudents();}).catch(function(error){console.error('Error updating student:',error);alert('Failed to update student');});};_this.cancelEdit=function(){_this.setState({editingStudent:null,editName:'',editFine:''});};_this.deleteStudent=function(studentId,studentName){if(window.confirm(\"Are you sure you want to delete student \\\"\".concat(studentName,\"\\\"?\"))){axios.delete(\"/api/deleteStudent/\".concat(studentId)).then(function(response){alert('Student deleted successfully!');_this.fetchStudents();}).catch(function(error){var _error$response,_error$response$data;console.error('Error deleting student:',error);alert(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.error)||'Failed to delete student');});}};_this.state={students:[],newStudentName:'',searchQuery:'',selectedStudent:null,editingStudent:null,editName:'',editFine:'',loading:false};return _this;}_createClass(Students,[{key:\"componentDidMount\",value:function componentDidMount(){this.fetchStudents();}},{key:\"render\",value:function render(){var _this2=this;return React.createElement(\"div\",{className:\"students-container\"},React.createElement(\"div\",{className:\"students-header\"},React.createElement(\"h1\",{className:\"students-title\"},\"Student Registry\"),React.createElement(\"p\",{className:\"students-subtitle\"},\"Manage student profiles and academic records\")),React.createElement(\"div\",{className:\"add-student-form\"},React.createElement(\"div\",{className:\"form-header\"},React.createElement(\"h3\",null,\"Add New Student\")),React.createElement(\"form\",{onSubmit:this.addStudent},React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",null,\"Student Name\"),React.createElement(\"input\",{type:\"text\",placeholder:\"Enter student full name\",value:this.state.newStudentName,onChange:function onChange(e){return _this2.setState({newStudentName:e.target.value});},required:true})),React.createElement(\"button\",{type:\"submit\"},\"Add Student\"))),React.createElement(\"div\",{className:\"search-section\"},React.createElement(\"div\",{className:\"form-header\"},React.createElement(\"h3\",null,\"Search Students\")),React.createElement(\"div\",{className:\"search-bar\"},React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",null,\"Search Query\"),React.createElement(\"input\",{type:\"text\",placeholder:\"Search by name...\",value:this.state.searchQuery,onChange:function onChange(e){return _this2.setState({searchQuery:e.target.value});}})),React.createElement(\"button\",{onClick:this.searchStudents},\"Search\"),React.createElement(\"button\",{className:\"secondary\",onClick:function onClick(){_this2.setState({searchQuery:''});_this2.fetchStudents();}},\"Clear\"))),React.createElement(\"div\",{className:\"students-table\"},React.createElement(\"h2\",{className:\"table-header\"},\"Student Directory (\",this.state.students.length,\" students)\"),this.state.loading?React.createElement(\"div\",{className:\"loading\"},\"Loading students...\"):React.createElement(\"table\",null,React.createElement(\"thead\",null,React.createElement(\"tr\",null,React.createElement(\"th\",null,\"ID\"),React.createElement(\"th\",null,\"Name\"),React.createElement(\"th\",null,\"Fine\"),React.createElement(\"th\",null,\"Actions\"))),React.createElement(\"tbody\",null,this.state.students.map(function(student){return React.createElement(\"tr\",{key:student.id},React.createElement(\"td\",null,student.id),React.createElement(\"td\",null,student.name),React.createElement(\"td\",null,\"\\u20B9\",student.fine),React.createElement(\"td\",null,React.createElement(\"button\",{onClick:function onClick(){return _this2.viewStudentDetails(student.id);}},\"View Details\"),React.createElement(\"button\",{className:\"secondary\",onClick:function onClick(){return _this2.editStudent(student);}},\"Edit\"),React.createElement(\"button\",{className:\"delete-btn danger\",onClick:function onClick(){return _this2.deleteStudent(student.id,student.name);}},\"Delete\")));})))),this.state.selectedStudent&&React.createElement(\"div\",{className:\"modal-overlay\",onClick:function onClick(){return _this2.setState({selectedStudent:null});}},React.createElement(\"div\",{className:\"modal-content\",onClick:function onClick(e){return e.stopPropagation();}},React.createElement(\"div\",{className:\"modal-header\"},React.createElement(\"h3\",null,\"Student Details\"),React.createElement(\"button\",{className:\"close-btn\",onClick:function onClick(){return _this2.setState({selectedStudent:null});}},\"\\xD7\")),React.createElement(\"div\",{className:\"modal-body\"},React.createElement(\"div\",{className:\"student-info\"},React.createElement(\"p\",null,React.createElement(\"strong\",null,\"ID:\"),\" \",this.state.selectedStudent.student.id),React.createElement(\"p\",null,React.createElement(\"strong\",null,\"Name:\"),\" \",this.state.selectedStudent.student.name),React.createElement(\"p\",null,React.createElement(\"strong\",null,\"Fine:\"),\" \\u20B9\",this.state.selectedStudent.student.fine)),React.createElement(\"div\",{className:\"issued-books\"},React.createElement(\"h4\",null,\"Issued Books\"),this.state.selectedStudent.issuedBooks.length===0?React.createElement(\"p\",null,\"No books currently issued\"):React.createElement(\"table\",null,React.createElement(\"thead\",null,React.createElement(\"tr\",null,React.createElement(\"th\",null,\"Book Name\"),React.createElement(\"th\",null,\"Author\"),React.createElement(\"th\",null,\"Issue Date\"),React.createElement(\"th\",null,\"Deadline\"))),React.createElement(\"tbody\",null,this.state.selectedStudent.issuedBooks.map(function(book){return React.createElement(\"tr\",{key:book.id},React.createElement(\"td\",null,book.name),React.createElement(\"td\",null,book.author),React.createElement(\"td\",null,new Date(book.date).toLocaleDateString()),React.createElement(\"td\",null,new Date(book.deadline).toLocaleDateString()));}))))))),this.state.editingStudent&&React.createElement(\"div\",{className:\"modal-overlay\",onClick:this.cancelEdit},React.createElement(\"div\",{className:\"modal-content\",onClick:function onClick(e){return e.stopPropagation();}},React.createElement(\"div\",{className:\"modal-header\"},React.createElement(\"h3\",null,\"Edit Student\"),React.createElement(\"button\",{className:\"close-btn\",onClick:this.cancelEdit},\"\\xD7\")),React.createElement(\"div\",{className:\"modal-body\"},React.createElement(\"div\",{className:\"edit-form\"},React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",null,\"Student Name:\"),React.createElement(\"input\",{type:\"text\",value:this.state.editName,onChange:function onChange(e){return _this2.setState({editName:e.target.value});},placeholder:\"Enter student name\",className:\"classic-input\",style:{width:'100%',margin:'5px 0'}})),React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",null,\"Fine Amount (\\u20B9):\"),React.createElement(\"input\",{type:\"number\",step:\"0.01\",min:\"0\",value:this.state.editFine,onChange:function onChange(e){return _this2.setState({editFine:e.target.value});},placeholder:\"Enter fine amount\",className:\"classic-input\",style:{width:'100%',margin:'5px 0'}})),React.createElement(\"div\",{className:\"form-actions\",style:{marginTop:'20px'}},React.createElement(\"button\",{onClick:this.updateStudent,className:\"classic-button\",style:{marginRight:'10px'}},\"Update Student\"),React.createElement(\"button\",{onClick:this.cancelEdit,className:\"classic-button secondary\"},\"Cancel\")))))));}}]);return Students;}(Component);export default Students;","map":{"version":3,"sources":["/Users/sanketbanate/Desktop/Project/Library-Management-System/frontend/src/components/Students/Students.js"],"names":["React","Component","axios","Students","props","fetchStudents","setState","loading","get","then","response","students","data","catch","error","console","addStudent","e","preventDefault","state","newStudentName","trim","post","name","alert","searchStudents","searchQuery","viewStudentDetails","studentId","selectedStudent","editStudent","student","editingStudent","editName","editFine","fine","toString","updateStudent","put","id","parseFloat","cancelEdit","deleteStudent","studentName","window","confirm","delete","target","value","length","map","stopPropagation","issuedBooks","book","author","Date","date","toLocaleDateString","deadline","width","margin","marginTop","marginRight"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport './Students.css';\n\nclass Students extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            students: [],\n            newStudentName: '',\n            searchQuery: '',\n            selectedStudent: null,\n            editingStudent: null,\n            editName: '',\n            editFine: '',\n            loading: false\n        };\n    }\n\n    componentDidMount() {\n        this.fetchStudents();\n    }\n\n    fetchStudents = () => {\n        this.setState({ loading: true });\n        axios.get('/api/getStudents')\n            .then(response => {\n                this.setState({ students: response.data, loading: false });\n            })\n            .catch(error => {\n                console.error('Error fetching students:', error);\n                this.setState({ loading: false });\n            });\n    }\n\n    addStudent = (e) => {\n        e.preventDefault();\n        if (!this.state.newStudentName.trim()) return;\n\n        axios.post('/api/addStudent', { name: this.state.newStudentName })\n            .then(response => {\n                this.setState({ newStudentName: '' });\n                this.fetchStudents();\n                alert('Student added successfully!');\n            })\n            .catch(error => {\n                console.error('Error adding student:', error);\n                alert('Failed to add student');\n            });\n    }\n\n    searchStudents = () => {\n        if (!this.state.searchQuery.trim()) {\n            this.fetchStudents();\n            return;\n        }\n\n        axios.get(`/api/searchStudents/${this.state.searchQuery}`)\n            .then(response => {\n                this.setState({ students: response.data });\n            })\n            .catch(error => {\n                console.error('Error searching students:', error);\n            });\n    }\n\n    viewStudentDetails = (studentId) => {\n        axios.get(`/api/getStudent/${studentId}`)\n            .then(response => {\n                this.setState({ selectedStudent: response.data });\n            })\n            .catch(error => {\n                console.error('Error fetching student details:', error);\n            });\n    }\n\n    editStudent = (student) => {\n        this.setState({\n            editingStudent: student,\n            editName: student.name,\n            editFine: student.fine.toString()\n        });\n    }\n\n    updateStudent = () => {\n        const { editingStudent, editName, editFine } = this.state;\n        \n        if (!editName.trim()) {\n            alert('Student name is required');\n            return;\n        }\n\n        axios.put(`/api/updateStudent/${editingStudent.id}`, {\n            name: editName,\n            fine: parseFloat(editFine) || 0\n        })\n        .then(response => {\n            alert('Student updated successfully!');\n            this.setState({\n                editingStudent: null,\n                editName: '',\n                editFine: ''\n            });\n            this.fetchStudents();\n        })\n        .catch(error => {\n            console.error('Error updating student:', error);\n            alert('Failed to update student');\n        });\n    }\n\n    cancelEdit = () => {\n        this.setState({\n            editingStudent: null,\n            editName: '',\n            editFine: ''\n        });\n    }\n\n    deleteStudent = (studentId, studentName) => {\n        if (window.confirm(`Are you sure you want to delete student \"${studentName}\"?`)) {\n            axios.delete(`/api/deleteStudent/${studentId}`)\n                .then(response => {\n                    alert('Student deleted successfully!');\n                    this.fetchStudents();\n                })\n                .catch(error => {\n                    console.error('Error deleting student:', error);\n                    alert(error.response?.data?.error || 'Failed to delete student');\n                });\n        }\n    }\n\n    render() {\n        return (\n            <div className=\"students-container\">\n                <div className=\"students-header\">\n                    <h1 className=\"students-title\">Student Registry</h1>\n                    <p className=\"students-subtitle\">Manage student profiles and academic records</p>\n                </div>\n                \n                <div className=\"add-student-form\">\n                    <div className=\"form-header\">\n                        <h3>Add New Student</h3>\n                    </div>\n                    <form onSubmit={this.addStudent}>\n                        <div className=\"form-group\">\n                            <label>Student Name</label>\n                            <input\n                                type=\"text\"\n                                placeholder=\"Enter student full name\"\n                                value={this.state.newStudentName}\n                                onChange={(e) => this.setState({ newStudentName: e.target.value })}\n                                required\n                            />\n                        </div>\n                        <button type=\"submit\">Add Student</button>\n                    </form>\n                </div>\n\n                <div className=\"search-section\">\n                    <div className=\"form-header\">\n                        <h3>Search Students</h3>\n                    </div>\n                    <div className=\"search-bar\">\n                        <div className=\"form-group\">\n                            <label>Search Query</label>\n                            <input\n                                type=\"text\"\n                                placeholder=\"Search by name...\"\n                                value={this.state.searchQuery}\n                                onChange={(e) => this.setState({ searchQuery: e.target.value })}\n                            />\n                        </div>\n                        <button onClick={this.searchStudents}>Search</button>\n                        <button className=\"secondary\" onClick={() => { this.setState({ searchQuery: '' }); this.fetchStudents(); }}>\n                            Clear\n                        </button>\n                    </div>\n                </div>\n\n                <div className=\"students-table\">\n                    <h2 className=\"table-header\">Student Directory ({this.state.students.length} students)</h2>\n                    {this.state.loading ? (\n                        <div className=\"loading\">Loading students...</div>\n                    ) : (\n                        <table>\n                            <thead>\n                                <tr>\n                                    <th>ID</th>\n                                    <th>Name</th>\n                                    <th>Fine</th>\n                                    <th>Actions</th>\n                                </tr>\n                            </thead>\n                            <tbody>\n                                {this.state.students.map(student => (\n                                    <tr key={student.id}>\n                                        <td>{student.id}</td>\n                                        <td>{student.name}</td>\n                                        <td>₹{student.fine}</td>\n                                        <td>\n                                            <button onClick={() => this.viewStudentDetails(student.id)}>\n                                                View Details\n                                            </button>\n                                            <button \n                                                className=\"secondary\"\n                                                onClick={() => this.editStudent(student)}\n                                            >\n                                                Edit\n                                            </button>\n                                            <button \n                                                className=\"delete-btn danger\"\n                                                onClick={() => this.deleteStudent(student.id, student.name)}\n                                            >\n                                                Delete\n                                            </button>\n                                        </td>\n                                    </tr>\n                                ))}\n                            </tbody>\n                        </table>\n                    )}\n                </div>\n\n                {this.state.selectedStudent && (\n                    <div className=\"modal-overlay\" onClick={() => this.setState({ selectedStudent: null })}>\n                        <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\n                            <div className=\"modal-header\">\n                                <h3>Student Details</h3>\n                                <button className=\"close-btn\" onClick={() => this.setState({ selectedStudent: null })}>\n                                    ×\n                                </button>\n                            </div>\n                            <div className=\"modal-body\">\n                                <div className=\"student-info\">\n                                    <p><strong>ID:</strong> {this.state.selectedStudent.student.id}</p>\n                                    <p><strong>Name:</strong> {this.state.selectedStudent.student.name}</p>\n                                    <p><strong>Fine:</strong> ₹{this.state.selectedStudent.student.fine}</p>\n                                </div>\n                                <div className=\"issued-books\">\n                                    <h4>Issued Books</h4>\n                                    {this.state.selectedStudent.issuedBooks.length === 0 ? (\n                                        <p>No books currently issued</p>\n                                    ) : (\n                                        <table>\n                                            <thead>\n                                                <tr>\n                                                    <th>Book Name</th>\n                                                    <th>Author</th>\n                                                    <th>Issue Date</th>\n                                                    <th>Deadline</th>\n                                                </tr>\n                                            </thead>\n                                            <tbody>\n                                                {this.state.selectedStudent.issuedBooks.map(book => (\n                                                    <tr key={book.id}>\n                                                        <td>{book.name}</td>\n                                                        <td>{book.author}</td>\n                                                        <td>{new Date(book.date).toLocaleDateString()}</td>\n                                                        <td>{new Date(book.deadline).toLocaleDateString()}</td>\n                                                    </tr>\n                                                ))}\n                                            </tbody>\n                                        </table>\n                                    )}\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                )}\n\n                {this.state.editingStudent && (\n                    <div className=\"modal-overlay\" onClick={this.cancelEdit}>\n                        <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\n                            <div className=\"modal-header\">\n                                <h3>Edit Student</h3>\n                                <button className=\"close-btn\" onClick={this.cancelEdit}>\n                                    ×\n                                </button>\n                            </div>\n                            <div className=\"modal-body\">\n                                <div className=\"edit-form\">\n                                    <div className=\"form-group\">\n                                        <label>Student Name:</label>\n                                        <input\n                                            type=\"text\"\n                                            value={this.state.editName}\n                                            onChange={(e) => this.setState({ editName: e.target.value })}\n                                            placeholder=\"Enter student name\"\n                                            className=\"classic-input\"\n                                            style={{width: '100%', margin: '5px 0'}}\n                                        />\n                                    </div>\n                                    <div className=\"form-group\">\n                                        <label>Fine Amount (₹):</label>\n                                        <input\n                                            type=\"number\"\n                                            step=\"0.01\"\n                                            min=\"0\"\n                                            value={this.state.editFine}\n                                            onChange={(e) => this.setState({ editFine: e.target.value })}\n                                            placeholder=\"Enter fine amount\"\n                                            className=\"classic-input\"\n                                            style={{width: '100%', margin: '5px 0'}}\n                                        />\n                                    </div>\n                                    <div className=\"form-actions\" style={{marginTop: '20px'}}>\n                                        <button \n                                            onClick={this.updateStudent}\n                                            className=\"classic-button\"\n                                            style={{marginRight: '10px'}}\n                                        >\n                                            Update Student\n                                        </button>\n                                        <button \n                                            onClick={this.cancelEdit}\n                                            className=\"classic-button secondary\"\n                                        >\n                                            Cancel\n                                        </button>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                )}\n            </div>\n        );\n    }\n}\n\nexport default Students;"]},"metadata":{},"sourceType":"module"}
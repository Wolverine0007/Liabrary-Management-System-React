{"ast":null,"code":"import _slicedToArray from\"/Users/sanketbanate/Desktop/Project/Library-Management-System/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _classCallCheck from\"/Users/sanketbanate/Desktop/Project/Library-Management-System/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/sanketbanate/Desktop/Project/Library-Management-System/frontend/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/sanketbanate/Desktop/Project/Library-Management-System/frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/sanketbanate/Desktop/Project/Library-Management-System/frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/sanketbanate/Desktop/Project/Library-Management-System/frontend/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import axios from'axios';import'./Dashboard.css';var Dashboard=/*#__PURE__*/function(_Component){_inherits(Dashboard,_Component);function Dashboard(props){var _this;_classCallCheck(this,Dashboard);_this=_possibleConstructorReturn(this,_getPrototypeOf(Dashboard).call(this,props));_this.fetchDashboardData=function(){Promise.all([axios.get(\"\".concat(process.env.REACT_APP_API_URL||'',\"/api/dashboard\")),axios.get(\"\".concat(process.env.REACT_APP_API_URL||'',\"/api/overdueBooks\")),axios.get(\"\".concat(process.env.REACT_APP_API_URL||'',\"/api/studentsWithFines\"))]).then(function(_ref){var _ref2=_slicedToArray(_ref,3),analyticsRes=_ref2[0],overdueRes=_ref2[1],finesRes=_ref2[2];console.log('Dashboard data:',{analytics:analyticsRes.data,overdueBooks:overdueRes.data,studentsWithFines:finesRes.data});_this.setState({analytics:analyticsRes.data,overdueBooks:overdueRes.data,studentsWithFines:finesRes.data,loading:false});}).catch(function(error){console.error('Error fetching dashboard data:',error);_this.setState({loading:false});});};_this.state={analytics:{},overdueBooks:[],studentsWithFines:[],loading:true};return _this;}_createClass(Dashboard,[{key:\"componentDidMount\",value:function componentDidMount(){this.fetchDashboardData();}},{key:\"render\",value:function render(){var _this$state=this.state,analytics=_this$state.analytics,overdueBooks=_this$state.overdueBooks,studentsWithFines=_this$state.studentsWithFines,loading=_this$state.loading;if(loading)return React.createElement(\"div\",{className:\"loading\"},\"Loading Dashboard...\");return React.createElement(\"div\",{className:\"dashboard\"},React.createElement(\"div\",{className:\"dashboard-header\"},React.createElement(\"h1\",{className:\"dashboard-title\"},\"Library Overview\"),React.createElement(\"p\",{className:\"dashboard-subtitle\"},\"Monitor your library's activities and statistics\")),React.createElement(\"div\",{className:\"stats-grid\"},React.createElement(\"div\",{className:\"stat-card\"},React.createElement(\"h3\",null,\"Total Books\"),React.createElement(\"div\",{className:\"stat-number\"},analytics.totalBooks||0)),React.createElement(\"div\",{className:\"stat-card\"},React.createElement(\"h3\",null,\"Available Books\"),React.createElement(\"div\",{className:\"stat-number\"},analytics.availableBooks||0)),React.createElement(\"div\",{className:\"stat-card\"},React.createElement(\"h3\",null,\"Total Students\"),React.createElement(\"div\",{className:\"stat-number\"},analytics.totalStudents||0)),React.createElement(\"div\",{className:\"stat-card\"},React.createElement(\"h3\",null,\"Books Borrowed\"),React.createElement(\"div\",{className:\"stat-number\"},analytics.totalBorrowed||0)),React.createElement(\"div\",{className:\"stat-card overdue\"},React.createElement(\"h3\",null,\"Overdue Books\"),React.createElement(\"div\",{className:\"stat-number\"},analytics.overdueBooks||0)),React.createElement(\"div\",{className:\"stat-card fines\"},React.createElement(\"h3\",null,\"Total Fines\"),React.createElement(\"div\",{className:\"stat-number\"},\"\\u20B9\",analytics.totalFines||0))),React.createElement(\"div\",{className:\"dashboard-sections\"},React.createElement(\"div\",{className:\"section\"},React.createElement(\"h3\",null,\"Overdue Books\"),overdueBooks.length===0?React.createElement(\"p\",null,\"No overdue books\"):React.createElement(\"table\",null,React.createElement(\"thead\",null,React.createElement(\"tr\",null,React.createElement(\"th\",null,\"Student ID\"),React.createElement(\"th\",null,\"Student\"),React.createElement(\"th\",null,\"Book\"),React.createElement(\"th\",null,\"Days Overdue\"),React.createElement(\"th\",null,\"Deadline\"))),React.createElement(\"tbody\",null,overdueBooks.slice(0,5).map(function(book,index){return React.createElement(\"tr\",{key:index},React.createElement(\"td\",null,book.studentId),React.createElement(\"td\",null,book.studentName),React.createElement(\"td\",null,book.bookName),React.createElement(\"td\",{className:\"overdue-days\"},book.daysOverdue),React.createElement(\"td\",null,new Date(book.deadline).toLocaleDateString()));})))),React.createElement(\"div\",{className:\"section\"},React.createElement(\"h3\",null,\"Students with Fines\"),studentsWithFines.length===0?React.createElement(\"p\",null,\"No outstanding fines\"):React.createElement(\"table\",null,React.createElement(\"thead\",null,React.createElement(\"tr\",null,React.createElement(\"th\",null,\"Student ID\"),React.createElement(\"th\",null,\"Student Name\"),React.createElement(\"th\",null,\"Recorded Fine\"),React.createElement(\"th\",null,\"Pending Fine\"),React.createElement(\"th\",null,\"Total\"))),React.createElement(\"tbody\",null,studentsWithFines.slice(0,5).map(function(student){var pendingFine=overdueBooks.filter(function(book){return book.studentName===student.name;}).reduce(function(total,book){return total+Math.max(0,book.daysOverdue)*10;},0);var recordedFine=parseFloat(student.fine)||0;var totalFine=recordedFine+pendingFine;return React.createElement(\"tr\",{key:student.id},React.createElement(\"td\",null,student.id),React.createElement(\"td\",null,student.name),React.createElement(\"td\",{className:\"fine-amount\"},\"\\u20B9\",recordedFine.toFixed(2)),React.createElement(\"td\",{className:\"pending-fine\"},\"\\u20B9\",pendingFine.toFixed(2)),React.createElement(\"td\",{className:\"total-fine\"},React.createElement(\"strong\",null,\"\\u20B9\",totalFine.toFixed(2))));}))))));}}]);return Dashboard;}(Component);export default Dashboard;","map":{"version":3,"sources":["/Users/sanketbanate/Desktop/Project/Library-Management-System/frontend/src/components/Dashboard/Dashboard.js"],"names":["React","Component","axios","Dashboard","props","fetchDashboardData","Promise","all","get","process","env","REACT_APP_API_URL","then","analyticsRes","overdueRes","finesRes","console","log","analytics","data","overdueBooks","studentsWithFines","setState","loading","catch","error","state","totalBooks","availableBooks","totalStudents","totalBorrowed","totalFines","length","slice","map","book","index","studentId","studentName","bookName","daysOverdue","Date","deadline","toLocaleDateString","student","pendingFine","filter","name","reduce","total","Math","max","recordedFine","parseFloat","fine","totalFine","id","toFixed"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport './Dashboard.css';\n\nclass Dashboard extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            analytics: {},\n            overdueBooks: [],\n            studentsWithFines: [],\n            loading: true\n        };\n    }\n\n    componentDidMount() {\n        this.fetchDashboardData();\n    }\n\n    fetchDashboardData = () => {\n        Promise.all([\n            axios.get(`${process.env.REACT_APP_API_URL || ''}/api/dashboard`),\n            axios.get(`${process.env.REACT_APP_API_URL || ''}/api/overdueBooks`),\n            axios.get(`${process.env.REACT_APP_API_URL || ''}/api/studentsWithFines`)\n        ])\n        .then(([analyticsRes, overdueRes, finesRes]) => {\n            console.log('Dashboard data:', {\n                analytics: analyticsRes.data,\n                overdueBooks: overdueRes.data,\n                studentsWithFines: finesRes.data\n            });\n            this.setState({\n                analytics: analyticsRes.data,\n                overdueBooks: overdueRes.data,\n                studentsWithFines: finesRes.data,\n                loading: false\n            });\n        })\n        .catch(error => {\n            console.error('Error fetching dashboard data:', error);\n            this.setState({ loading: false });\n        });\n    }\n\n    render() {\n        const { analytics, overdueBooks, studentsWithFines, loading } = this.state;\n\n        if (loading) return <div className=\"loading\">Loading Dashboard...</div>;\n\n        return (\n            <div className=\"dashboard\">\n                <div className=\"dashboard-header\">\n                    <h1 className=\"dashboard-title\">Library Overview</h1>\n                    <p className=\"dashboard-subtitle\">Monitor your library's activities and statistics</p>\n                </div>\n                \n                <div className=\"stats-grid\">\n                    <div className=\"stat-card\">\n                        <h3>Total Books</h3>\n                        <div className=\"stat-number\">{analytics.totalBooks || 0}</div>\n                    </div>\n                    <div className=\"stat-card\">\n                        <h3>Available Books</h3>\n                        <div className=\"stat-number\">{analytics.availableBooks || 0}</div>\n                    </div>\n                    <div className=\"stat-card\">\n                        <h3>Total Students</h3>\n                        <div className=\"stat-number\">{analytics.totalStudents || 0}</div>\n                    </div>\n                    <div className=\"stat-card\">\n                        <h3>Books Borrowed</h3>\n                        <div className=\"stat-number\">{analytics.totalBorrowed || 0}</div>\n                    </div>\n                    <div className=\"stat-card overdue\">\n                        <h3>Overdue Books</h3>\n                        <div className=\"stat-number\">{analytics.overdueBooks || 0}</div>\n                    </div>\n                    <div className=\"stat-card fines\">\n                        <h3>Total Fines</h3>\n                        <div className=\"stat-number\">₹{analytics.totalFines || 0}</div>\n                    </div>\n                </div>\n\n                <div className=\"dashboard-sections\">\n                    <div className=\"section\">\n                        <h3>Overdue Books</h3>\n                        {overdueBooks.length === 0 ? (\n                            <p>No overdue books</p>\n                        ) : (\n                            <table>\n                                <thead>\n                                    <tr>\n                                        <th>Student ID</th>\n                                        <th>Student</th>\n                                        <th>Book</th>\n                                        <th>Days Overdue</th>\n                                        <th>Deadline</th>\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                    {overdueBooks.slice(0, 5).map((book, index) => (\n                                        <tr key={index}>\n                                            <td>{book.studentId}</td>\n                                            <td>{book.studentName}</td>\n                                            <td>{book.bookName}</td>\n                                            <td className=\"overdue-days\">{book.daysOverdue}</td>\n                                            <td>{new Date(book.deadline).toLocaleDateString()}</td>\n                                        </tr>\n                                    ))}\n                                </tbody>\n                            </table>\n                        )}\n                    </div>\n\n                    <div className=\"section\">\n                        <h3>Students with Fines</h3>\n                        {studentsWithFines.length === 0 ? (\n                            <p>No outstanding fines</p>\n                        ) : (\n                            <table>\n                                <thead>\n                                    <tr>\n                                        <th>Student ID</th>\n                                        <th>Student Name</th>\n                                        <th>Recorded Fine</th>\n                                        <th>Pending Fine</th>\n                                        <th>Total</th>\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                    {studentsWithFines.slice(0, 5).map(student => {\n                                        const pendingFine = overdueBooks\n                                            .filter(book => book.studentName === student.name)\n                                            .reduce((total, book) => total + (Math.max(0, book.daysOverdue) * 10), 0);\n                                        const recordedFine = parseFloat(student.fine) || 0;\n                                        const totalFine = recordedFine + pendingFine;\n                                        \n                                        return (\n                                            <tr key={student.id}>\n                                                <td>{student.id}</td>\n                                                <td>{student.name}</td>\n                                                <td className=\"fine-amount\">₹{recordedFine.toFixed(2)}</td>\n                                                <td className=\"pending-fine\">₹{pendingFine.toFixed(2)}</td>\n                                                <td className=\"total-fine\"><strong>₹{totalFine.toFixed(2)}</strong></td>\n                                            </tr>\n                                        );\n                                    })}\n                                </tbody>\n                            </table>\n                        )}\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Dashboard;"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _objectSpread from\"/Users/sanketbanate/Desktop/Project/Library-Management-System/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/sanketbanate/Desktop/Project/Library-Management-System/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/sanketbanate/Desktop/Project/Library-Management-System/frontend/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/sanketbanate/Desktop/Project/Library-Management-System/frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/sanketbanate/Desktop/Project/Library-Management-System/frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/sanketbanate/Desktop/Project/Library-Management-System/frontend/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import axios from'axios';import'./Books.css';var Books=/*#__PURE__*/function(_React$Component){_inherits(Books,_React$Component);function Books(){var _getPrototypeOf2;var _this;_classCallCheck(this,Books);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Books)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={books:[],newBook:{name:'',author:'',book_count:1},searchQuery:'',loading:false,bulkBooks:'',showBulkImport:false};_this.fetchBooks=function(){_this.setState({loading:true});axios.get('/api/getBooks').then(function(response){_this.setState({books:response.data,loading:false});}).catch(function(error){console.error('Error fetching books:',error);_this.setState({loading:false});});};_this.addBook=function(e){e.preventDefault();if(!_this.state.newBook.name.trim()||!_this.state.newBook.author.trim())return;axios.post('/api/addBook',_this.state.newBook).then(function(response){_this.setState({newBook:{name:'',author:'',book_count:1}});_this.fetchBooks();alert('Book added successfully!');}).catch(function(error){console.error('Error adding book:',error);alert('Failed to add book');});};_this.searchBooks=function(){if(!_this.state.searchQuery.trim()){_this.fetchBooks();return;}axios.get(\"/api/searchBooks/\".concat(_this.state.searchQuery)).then(function(response){_this.setState({books:response.data});}).catch(function(error){console.error('Error searching books:',error);});};_this.deleteBook=function(bookId,bookName){if(window.confirm(\"Are you sure you want to delete \\\"\".concat(bookName,\"\\\"?\"))){axios.delete(\"/api/deleteBook/\".concat(bookId)).then(function(response){alert('Book deleted successfully!');_this.fetchBooks();}).catch(function(error){var _error$response,_error$response$data;console.error('Error deleting book:',error);alert(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.error)||'Failed to delete book');});}};_this.bulkImportBooks=function(){if(!_this.state.bulkBooks.trim()){alert('Please enter book data');return;}var lines=_this.state.bulkBooks.trim().split('\\n');var books=[];var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=lines[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var line=_step.value;var parts=line.split(',').map(function(part){return part.trim();});if(parts.length>=2){books.push({name:parts[0],author:parts[1],book_count:parseInt(parts[2])||1});}}}catch(err){_didIteratorError=true;_iteratorError=err;}finally{try{if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return();}}finally{if(_didIteratorError){throw _iteratorError;}}}if(books.length===0){alert('No valid book data found. Format: Book Name, Author, Count');return;}axios.post('/api/bulkAddBooks',{books:books}).then(function(response){alert(response.data.message);_this.setState({bulkBooks:'',showBulkImport:false});_this.fetchBooks();}).catch(function(error){console.error('Error bulk importing books:',error);alert('Failed to import books');});};return _this;}_createClass(Books,[{key:\"componentDidMount\",value:function componentDidMount(){this.fetchBooks();}},{key:\"render\",value:function render(){var _this2=this;return React.createElement(\"div\",{id:\"books\"},React.createElement(\"div\",{className:\"books-header\"},React.createElement(\"h1\",{className:\"books-title\"},\"Book Collection\"),React.createElement(\"p\",{className:\"books-subtitle\"},\"Manage your library's book inventory\")),React.createElement(\"div\",{className:\"add-book-form\"},React.createElement(\"div\",{className:\"form-header\"},React.createElement(\"h3\",null,\"Add Books\"),React.createElement(\"div\",{className:\"form-toggle\"},React.createElement(\"button\",{type:\"button\",className:!this.state.showBulkImport?'active':'',onClick:function onClick(){return _this2.setState({showBulkImport:false});}},\"Single Book\"),React.createElement(\"button\",{type:\"button\",className:this.state.showBulkImport?'active':'',onClick:function onClick(){return _this2.setState({showBulkImport:true});}},\"Bulk Import\"))),!this.state.showBulkImport?React.createElement(\"form\",{onSubmit:this.addBook},React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",null,\"Book Name\"),React.createElement(\"input\",{type:\"text\",placeholder:\"Enter book name\",value:this.state.newBook.name,onChange:function onChange(e){return _this2.setState({newBook:_objectSpread({},_this2.state.newBook,{name:e.target.value})});},required:true})),React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",null,\"Author\"),React.createElement(\"input\",{type:\"text\",placeholder:\"Enter author name\",value:this.state.newBook.author,onChange:function onChange(e){return _this2.setState({newBook:_objectSpread({},_this2.state.newBook,{author:e.target.value})});},required:true})),React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",null,\"Count\"),React.createElement(\"input\",{type:\"number\",placeholder:\"Number of copies\",min:\"1\",value:this.state.newBook.book_count,onChange:function onChange(e){return _this2.setState({newBook:_objectSpread({},_this2.state.newBook,{book_count:parseInt(e.target.value)})});}})),React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"button\",{type:\"submit\"},\"Add Book\"))):React.createElement(\"div\",{className:\"bulk-import\"},React.createElement(\"p\",{className:\"bulk-instructions\"},\"Enter books in format: \",React.createElement(\"strong\",null,\"Book Name, Author, Count\"),\" (one per line)\"),React.createElement(\"textarea\",{placeholder:\"Example:\\\\nHarry Potter, J.K. Rowling, 5\\\\nLord of the Rings, J.R.R. Tolkien, 3\",value:this.state.bulkBooks,onChange:function onChange(e){return _this2.setState({bulkBooks:e.target.value});},rows:\"6\"}),React.createElement(\"button\",{type:\"button\",onClick:this.bulkImportBooks},\"Import Books\"))),React.createElement(\"div\",{className:\"search-section\"},React.createElement(\"div\",{className:\"form-header\"},React.createElement(\"h3\",null,\"Search Books\")),React.createElement(\"div\",{className:\"search-bar\"},React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",null,\"Search Query\"),React.createElement(\"input\",{type:\"text\",placeholder:\"Search by name or author...\",value:this.state.searchQuery,onChange:function onChange(e){return _this2.setState({searchQuery:e.target.value});}})),React.createElement(\"button\",{onClick:this.searchBooks},\"Search\"),React.createElement(\"button\",{className:\"secondary\",onClick:function onClick(){_this2.setState({searchQuery:''});_this2.fetchBooks();}},\"Clear\"))),this.state.loading?React.createElement(\"div\",{className:\"loading\"},\"Loading books...\"):React.createElement(\"div\",{id:\"results\"},React.createElement(\"div\",{id:\"heading\"},\"Book Inventory (\",this.state.books.length,\" books)\"),React.createElement(\"table\",{className:\"table\"},React.createElement(\"thead\",null,React.createElement(\"tr\",null,React.createElement(\"th\",null,\"ID\"),React.createElement(\"th\",null,\"Book Name\"),React.createElement(\"th\",null,\"Author\"),React.createElement(\"th\",null,\"Available Count\"),React.createElement(\"th\",null,\"Actions\"))),React.createElement(\"tbody\",null,this.state.books.map(function(book){return React.createElement(\"tr\",{key:book.id},React.createElement(\"td\",null,book.id),React.createElement(\"td\",null,book.name),React.createElement(\"td\",null,book.author),React.createElement(\"td\",null,book.book_count),React.createElement(\"td\",null,React.createElement(\"button\",{className:\"delete-btn danger\",onClick:function onClick(){return _this2.deleteBook(book.id,book.name);}},\"Delete\")));})))));}}]);return Books;}(React.Component);export default Books;","map":{"version":3,"sources":["/Users/sanketbanate/Desktop/Project/Library-Management-System/frontend/src/components/Books/Books.js"],"names":["React","axios","Books","state","books","newBook","name","author","book_count","searchQuery","loading","bulkBooks","showBulkImport","fetchBooks","setState","get","then","response","data","catch","error","console","addBook","e","preventDefault","trim","post","alert","searchBooks","deleteBook","bookId","bookName","window","confirm","delete","bulkImportBooks","lines","split","line","parts","map","part","length","push","parseInt","message","target","value","book","id","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport axios from 'axios';\r\nimport './Books.css';\r\n\r\nclass Books extends React.Component {\r\n    \r\n    state = {\r\n        books: [],\r\n        newBook: { name: '', author: '', book_count: 1 },\r\n        searchQuery: '',\r\n        loading: false,\r\n        bulkBooks: '',\r\n        showBulkImport: false\r\n    };\r\n\r\n    componentDidMount() {\r\n        this.fetchBooks();\r\n    }\r\n\r\n    fetchBooks = () => {\r\n        this.setState({ loading: true });\r\n        axios.get('/api/getBooks')\r\n            .then(response => {\r\n                this.setState({ books: response.data, loading: false });\r\n            })\r\n            .catch(error => {\r\n                console.error('Error fetching books:', error);\r\n                this.setState({ loading: false });\r\n            });\r\n    }\r\n\r\n    addBook = (e) => {\r\n        e.preventDefault();\r\n        if (!this.state.newBook.name.trim() || !this.state.newBook.author.trim()) return;\r\n\r\n        axios.post('/api/addBook', this.state.newBook)\r\n            .then(response => {\r\n                this.setState({ newBook: { name: '', author: '', book_count: 1 } });\r\n                this.fetchBooks();\r\n                alert('Book added successfully!');\r\n            })\r\n            .catch(error => {\r\n                console.error('Error adding book:', error);\r\n                alert('Failed to add book');\r\n            });\r\n    }\r\n\r\n    searchBooks = () => {\r\n        if (!this.state.searchQuery.trim()) {\r\n            this.fetchBooks();\r\n            return;\r\n        }\r\n\r\n        axios.get(`/api/searchBooks/${this.state.searchQuery}`)\r\n            .then(response => {\r\n                this.setState({ books: response.data });\r\n            })\r\n            .catch(error => {\r\n                console.error('Error searching books:', error);\r\n            });\r\n    }\r\n\r\n    deleteBook = (bookId, bookName) => {\r\n        if (window.confirm(`Are you sure you want to delete \"${bookName}\"?`)) {\r\n            axios.delete(`/api/deleteBook/${bookId}`)\r\n                .then(response => {\r\n                    alert('Book deleted successfully!');\r\n                    this.fetchBooks();\r\n                })\r\n                .catch(error => {\r\n                    console.error('Error deleting book:', error);\r\n                    alert(error.response?.data?.error || 'Failed to delete book');\r\n                });\r\n        }\r\n    }\r\n\r\n    bulkImportBooks = () => {\r\n        if (!this.state.bulkBooks.trim()) {\r\n            alert('Please enter book data');\r\n            return;\r\n        }\r\n\r\n        const lines = this.state.bulkBooks.trim().split('\\n');\r\n        const books = [];\r\n        \r\n        for (let line of lines) {\r\n            const parts = line.split(',').map(part => part.trim());\r\n            if (parts.length >= 2) {\r\n                books.push({\r\n                    name: parts[0],\r\n                    author: parts[1],\r\n                    book_count: parseInt(parts[2]) || 1\r\n                });\r\n            }\r\n        }\r\n\r\n        if (books.length === 0) {\r\n            alert('No valid book data found. Format: Book Name, Author, Count');\r\n            return;\r\n        }\r\n\r\n        axios.post('/api/bulkAddBooks', { books })\r\n            .then(response => {\r\n                alert(response.data.message);\r\n                this.setState({ bulkBooks: '', showBulkImport: false });\r\n                this.fetchBooks();\r\n            })\r\n            .catch(error => {\r\n                console.error('Error bulk importing books:', error);\r\n                alert('Failed to import books');\r\n            });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div id='books'>\r\n                <div className=\"books-header\">\r\n                    <h1 className=\"books-title\">Book Collection</h1>\r\n                    <p className=\"books-subtitle\">Manage your library's book inventory</p>\r\n                </div>\r\n                \r\n                <div className=\"add-book-form\">\r\n                    <div className=\"form-header\">\r\n                        <h3>Add Books</h3>\r\n                        <div className=\"form-toggle\">\r\n                            <button \r\n                                type=\"button\" \r\n                                className={!this.state.showBulkImport ? 'active' : ''}\r\n                                onClick={() => this.setState({ showBulkImport: false })}\r\n                            >\r\n                                Single Book\r\n                            </button>\r\n                            <button \r\n                                type=\"button\" \r\n                                className={this.state.showBulkImport ? 'active' : ''}\r\n                                onClick={() => this.setState({ showBulkImport: true })}\r\n                            >\r\n                                Bulk Import\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                    \r\n                    {!this.state.showBulkImport ? (\r\n                        <form onSubmit={this.addBook}>\r\n                            <div className=\"form-group\">\r\n                                <label>Book Name</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    placeholder=\"Enter book name\"\r\n                                    value={this.state.newBook.name}\r\n                                    onChange={(e) => this.setState({ newBook: { ...this.state.newBook, name: e.target.value } })}\r\n                                    required\r\n                                />\r\n                            </div>\r\n                            <div className=\"form-group\">\r\n                                <label>Author</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    placeholder=\"Enter author name\"\r\n                                    value={this.state.newBook.author}\r\n                                    onChange={(e) => this.setState({ newBook: { ...this.state.newBook, author: e.target.value } })}\r\n                                    required\r\n                                />\r\n                            </div>\r\n                            <div className=\"form-group\">\r\n                                <label>Count</label>\r\n                                <input\r\n                                    type=\"number\"\r\n                                    placeholder=\"Number of copies\"\r\n                                    min=\"1\"\r\n                                    value={this.state.newBook.book_count}\r\n                                    onChange={(e) => this.setState({ newBook: { ...this.state.newBook, book_count: parseInt(e.target.value) } })}\r\n                                />\r\n                            </div>\r\n                            <div className=\"form-group\">\r\n                                <button type=\"submit\">Add Book</button>\r\n                            </div>\r\n                        </form>\r\n                    ) : (\r\n                        <div className=\"bulk-import\">\r\n                            <p className=\"bulk-instructions\">\r\n                                Enter books in format: <strong>Book Name, Author, Count</strong> (one per line)\r\n                            </p>\r\n                            <textarea\r\n                                placeholder=\"Example:\\nHarry Potter, J.K. Rowling, 5\\nLord of the Rings, J.R.R. Tolkien, 3\"\r\n                                value={this.state.bulkBooks}\r\n                                onChange={(e) => this.setState({ bulkBooks: e.target.value })}\r\n                                rows=\"6\"\r\n                            />\r\n                            <button type=\"button\" onClick={this.bulkImportBooks}>Import Books</button>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                <div className=\"search-section\">\r\n                    <div className=\"form-header\">\r\n                        <h3>Search Books</h3>\r\n                    </div>\r\n                    <div className=\"search-bar\">\r\n                        <div className=\"form-group\">\r\n                            <label>Search Query</label>\r\n                            <input\r\n                                type=\"text\"\r\n                                placeholder=\"Search by name or author...\"\r\n                                value={this.state.searchQuery}\r\n                                onChange={(e) => this.setState({ searchQuery: e.target.value })}\r\n                            />\r\n                        </div>\r\n                        <button onClick={this.searchBooks}>Search</button>\r\n                        <button className=\"secondary\" onClick={() => { this.setState({ searchQuery: '' }); this.fetchBooks(); }}>Clear</button>\r\n                    </div>\r\n                </div>\r\n\r\n                {this.state.loading ? (\r\n                    <div className=\"loading\">Loading books...</div>\r\n                ) : (\r\n                    <div id=\"results\">\r\n                        <div id=\"heading\">Book Inventory ({this.state.books.length} books)</div>\r\n                        <table className=\"table\">\r\n                            <thead>\r\n                                <tr>\r\n                                    <th>ID</th>\r\n                                    <th>Book Name</th>\r\n                                    <th>Author</th>\r\n                                    <th>Available Count</th>\r\n                                    <th>Actions</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                {this.state.books.map(book => (\r\n                                    <tr key={book.id}>\r\n                                        <td>{book.id}</td>\r\n                                        <td>{book.name}</td>\r\n                                        <td>{book.author}</td>\r\n                                        <td>{book.book_count}</td>\r\n                                        <td>\r\n                                            <button \r\n                                                className=\"delete-btn danger\"\r\n                                                onClick={() => this.deleteBook(book.id, book.name)}\r\n                                            >\r\n                                                Delete\r\n                                            </button>\r\n                                        </td>\r\n                                    </tr>\r\n                                ))}\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nexport default Books;"]},"metadata":{},"sourceType":"module"}
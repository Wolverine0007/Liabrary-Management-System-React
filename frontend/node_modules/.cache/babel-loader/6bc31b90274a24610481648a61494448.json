{"ast":null,"code":"var _jsxFileName = \"/Users/sanketbanate/Desktop/Project/Library-Management-System/frontend/src/components/search/search.js\";\nimport React from 'react';\nimport axios from 'axios';\nimport './search.css';\n\nclass Search extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      searchType: 'books',\n      searchQuery: '',\n      bookId: '',\n      results: [],\n      bookHolders: [],\n      loading: false\n    };\n\n    this.searchBooks = () => {\n      if (!this.state.searchQuery.trim()) return;\n      this.setState({\n        loading: true\n      });\n      axios.get(`/api/searchBooks/${this.state.searchQuery}`).then(response => {\n        this.setState({\n          results: response.data,\n          loading: false\n        });\n      }).catch(error => {\n        console.error('Error searching books:', error);\n        this.setState({\n          loading: false\n        });\n      });\n    };\n\n    this.searchStudents = () => {\n      if (!this.state.searchQuery.trim()) return;\n      this.setState({\n        loading: true\n      });\n      axios.get(`/api/searchStudents/${this.state.searchQuery}`).then(response => {\n        this.setState({\n          results: response.data,\n          loading: false\n        });\n      }).catch(error => {\n        console.error('Error searching students:', error);\n        this.setState({\n          loading: false\n        });\n      });\n    };\n\n    this.findBookHolders = () => {\n      if (!this.state.bookId.trim()) return;\n      this.setState({\n        loading: true\n      });\n      axios.get(`/api/bookHolders/${this.state.bookId}`).then(response => {\n        this.setState({\n          bookHolders: response.data,\n          loading: false\n        });\n      }).catch(error => {\n        console.error('Error finding book holders:', error);\n        this.setState({\n          loading: false,\n          bookHolders: []\n        });\n      });\n    };\n\n    this.handleSearch = () => {\n      if (this.state.searchType === 'books') {\n        this.searchBooks();\n      } else {\n        this.searchStudents();\n      }\n    };\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      id: \"search\",\n      className: \"text-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, \"Search Library\"), React.createElement(\"div\", {\n      className: \"search-section\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, \"Search Books or Students\"), React.createElement(\"div\", {\n      className: \"search-controls\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, React.createElement(\"select\", {\n      value: this.state.searchType,\n      onChange: e => this.setState({\n        searchType: e.target.value,\n        results: []\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      value: \"books\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, \"Search Books\"), React.createElement(\"option\", {\n      value: \"students\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, \"Search Students\")), React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: this.state.searchType === 'books' ? 'Enter book name or author...' : 'Enter student name...',\n      value: this.state.searchQuery,\n      onChange: e => this.setState({\n        searchQuery: e.target.value\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      onClick: this.handleSearch,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, \"Search\"))), React.createElement(\"div\", {\n      className: \"book-holders-section\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, \"Find Who Has a Book\"), React.createElement(\"div\", {\n      className: \"search-controls\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"number\",\n      placeholder: \"Enter Book ID...\",\n      value: this.state.bookId,\n      onChange: e => this.setState({\n        bookId: e.target.value\n      }),\n      min: \"1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      onClick: this.findBookHolders,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, \"Find Holders\"))), this.state.loading && React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, \"Loading...\"), this.state.results.length > 0 && React.createElement(\"div\", {\n      className: \"search-results\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, this.state.searchType === 'books' ? 'Book Results' : 'Student Results'), React.createElement(\"table\", {\n      className: \"table table-hover\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, this.state.searchType === 'books' ? React.createElement(React.Fragment, null, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, \"ID\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, \"Book Name\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, \"Author\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, \"Available Count\")) : React.createElement(React.Fragment, null, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, \"ID\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, \"Student Name\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, \"Fine\")))), React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, this.state.results.map(item => React.createElement(\"tr\", {\n      key: item.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, this.state.searchType === 'books' ? React.createElement(React.Fragment, null, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, item.id), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, item.name.toUpperCase()), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, item.author), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, item.book_count)) : React.createElement(React.Fragment, null, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, item.id), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, item.name.toUpperCase()), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, \"$\", item.fine))))))), this.state.bookHolders.length > 0 && React.createElement(\"div\", {\n      className: \"book-holders-results\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, \"Students Who Have This Book\"), React.createElement(\"table\", {\n      className: \"table table-hover\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, \"Student ID\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, \"Student Name\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, \"Issue Date\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, \"Return Deadline\"))), React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, this.state.bookHolders.map(holder => React.createElement(\"tr\", {\n      key: holder.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, holder.id), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, holder.name.toUpperCase()), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }, new Date(holder.date).toLocaleDateString()), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, new Date(holder.deadline).toLocaleDateString())))))), this.state.bookHolders.length === 0 && this.state.bookId && !this.state.loading && React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, \"No one has issued this book or book not found\"));\n  }\n\n}\n\nexport default Search;","map":{"version":3,"sources":["/Users/sanketbanate/Desktop/Project/Library-Management-System/frontend/src/components/search/search.js"],"names":["React","axios","Search","Component","state","searchType","searchQuery","bookId","results","bookHolders","loading","searchBooks","trim","setState","get","then","response","data","catch","error","console","searchStudents","findBookHolders","handleSearch","render","e","target","value","length","map","item","id","name","toUpperCase","author","book_count","fine","holder","Date","date","toLocaleDateString","deadline"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport axios from 'axios';\r\nimport './search.css';\r\n\r\nclass Search extends React.Component {\r\n    \r\n    state = {\r\n        searchType: 'books',\r\n        searchQuery: '',\r\n        bookId: '',\r\n        results: [],\r\n        bookHolders: [],\r\n        loading: false\r\n    };\r\n\r\n    searchBooks = () => {\r\n        if (!this.state.searchQuery.trim()) return;\r\n        \r\n        this.setState({ loading: true });\r\n        axios.get(`/api/searchBooks/${this.state.searchQuery}`)\r\n            .then(response => {\r\n                this.setState({ results: response.data, loading: false });\r\n            })\r\n            .catch(error => {\r\n                console.error('Error searching books:', error);\r\n                this.setState({ loading: false });\r\n            });\r\n    }\r\n\r\n    searchStudents = () => {\r\n        if (!this.state.searchQuery.trim()) return;\r\n        \r\n        this.setState({ loading: true });\r\n        axios.get(`/api/searchStudents/${this.state.searchQuery}`)\r\n            .then(response => {\r\n                this.setState({ results: response.data, loading: false });\r\n            })\r\n            .catch(error => {\r\n                console.error('Error searching students:', error);\r\n                this.setState({ loading: false });\r\n            });\r\n    }\r\n\r\n    findBookHolders = () => {\r\n        if (!this.state.bookId.trim()) return;\r\n        \r\n        this.setState({ loading: true });\r\n        axios.get(`/api/bookHolders/${this.state.bookId}`)\r\n            .then(response => {\r\n                this.setState({ bookHolders: response.data, loading: false });\r\n            })\r\n            .catch(error => {\r\n                console.error('Error finding book holders:', error);\r\n                this.setState({ loading: false, bookHolders: [] });\r\n            });\r\n    }\r\n\r\n    handleSearch = () => {\r\n        if (this.state.searchType === 'books') {\r\n            this.searchBooks();\r\n        } else {\r\n            this.searchStudents();\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div id='search' className=\"text-center\">\r\n                <h2>Search Library</h2>\r\n                \r\n                <div className=\"search-section\">\r\n                    <h3>Search Books or Students</h3>\r\n                    <div className=\"search-controls\">\r\n                        <select \r\n                            value={this.state.searchType} \r\n                            onChange={(e) => this.setState({ searchType: e.target.value, results: [] })}\r\n                        >\r\n                            <option value=\"books\">Search Books</option>\r\n                            <option value=\"students\">Search Students</option>\r\n                        </select>\r\n                        <input\r\n                            type=\"text\"\r\n                            placeholder={this.state.searchType === 'books' ? 'Enter book name or author...' : 'Enter student name...'}\r\n                            value={this.state.searchQuery}\r\n                            onChange={(e) => this.setState({ searchQuery: e.target.value })}\r\n                        />\r\n                        <button onClick={this.handleSearch}>Search</button>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"book-holders-section\">\r\n                    <h3>Find Who Has a Book</h3>\r\n                    <div className=\"search-controls\">\r\n                        <input\r\n                            type=\"number\"\r\n                            placeholder=\"Enter Book ID...\"\r\n                            value={this.state.bookId}\r\n                            onChange={(e) => this.setState({ bookId: e.target.value })}\r\n                            min=\"1\"\r\n                        />\r\n                        <button onClick={this.findBookHolders}>Find Holders</button>\r\n                    </div>\r\n                </div>\r\n\r\n                {this.state.loading && <p>Loading...</p>}\r\n\r\n                {this.state.results.length > 0 && (\r\n                    <div className=\"search-results\">\r\n                        <h3>{this.state.searchType === 'books' ? 'Book Results' : 'Student Results'}</h3>\r\n                        <table className=\"table table-hover\">\r\n                            <thead>\r\n                                <tr>\r\n                                    {this.state.searchType === 'books' ? (\r\n                                        <>\r\n                                            <th>ID</th>\r\n                                            <th>Book Name</th>\r\n                                            <th>Author</th>\r\n                                            <th>Available Count</th>\r\n                                        </>\r\n                                    ) : (\r\n                                        <>\r\n                                            <th>ID</th>\r\n                                            <th>Student Name</th>\r\n                                            <th>Fine</th>\r\n                                        </>\r\n                                    )}\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                {this.state.results.map(item => (\r\n                                    <tr key={item.id}>\r\n                                        {this.state.searchType === 'books' ? (\r\n                                            <>\r\n                                                <td>{item.id}</td>\r\n                                                <td>{item.name.toUpperCase()}</td>\r\n                                                <td>{item.author}</td>\r\n                                                <td>{item.book_count}</td>\r\n                                            </>\r\n                                        ) : (\r\n                                            <>\r\n                                                <td>{item.id}</td>\r\n                                                <td>{item.name.toUpperCase()}</td>\r\n                                                <td>${item.fine}</td>\r\n                                            </>\r\n                                        )}\r\n                                    </tr>\r\n                                ))}\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                )}\r\n\r\n                {this.state.bookHolders.length > 0 && (\r\n                    <div className=\"book-holders-results\">\r\n                        <h3>Students Who Have This Book</h3>\r\n                        <table className=\"table table-hover\">\r\n                            <thead>\r\n                                <tr>\r\n                                    <th>Student ID</th>\r\n                                    <th>Student Name</th>\r\n                                    <th>Issue Date</th>\r\n                                    <th>Return Deadline</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                {this.state.bookHolders.map(holder => (\r\n                                    <tr key={holder.id}>\r\n                                        <td>{holder.id}</td>\r\n                                        <td>{holder.name.toUpperCase()}</td>\r\n                                        <td>{new Date(holder.date).toLocaleDateString()}</td>\r\n                                        <td>{new Date(holder.deadline).toLocaleDateString()}</td>\r\n                                    </tr>\r\n                                ))}\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                )}\r\n\r\n                {this.state.bookHolders.length === 0 && this.state.bookId && !this.state.loading && (\r\n                    <p>No one has issued this book or book not found</p>\r\n                )}\r\n            </div>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nexport default Search;"]},"metadata":{},"sourceType":"module"}
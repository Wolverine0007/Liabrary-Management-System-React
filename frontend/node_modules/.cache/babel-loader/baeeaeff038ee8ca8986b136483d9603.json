{"ast":null,"code":"var _jsxFileName = \"/Users/sanketbanate/Desktop/Project/Library-Management-System/frontend/src/components/FineManagement/FineManagement.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport './FineManagement.css';\n\nclass FineManagement extends Component {\n  constructor(props) {\n    super(props);\n\n    this.fetchFineData = () => {\n      this.setState({\n        loading: true\n      });\n      Promise.all([axios.get('/api/studentsWithFines'), axios.get('/api/overdueBooks')]).then(([finesRes, overdueRes]) => {\n        this.setState({\n          studentsWithFines: finesRes.data,\n          overdueBooks: overdueRes.data,\n          loading: false\n        });\n      }).catch(error => {\n        console.error('Error fetching fine data:', error);\n        this.setState({\n          loading: false\n        });\n      });\n    };\n\n    this.payFine = (studentId, studentName, currentFine) => {\n      const amount = parseFloat(this.state.paymentAmount);\n\n      if (!amount || amount <= 0 || amount > currentFine) {\n        alert('Please enter a valid payment amount');\n        return;\n      }\n\n      if (window.confirm(`Process payment of $${amount} for ${studentName}?`)) {\n        axios.post('/api/payFine', {\n          studentId,\n          amount\n        }).then(response => {\n          alert('Payment processed successfully!');\n          this.setState({\n            paymentAmount: '',\n            selectedStudent: null\n          });\n          this.fetchFineData();\n        }).catch(error => {\n          console.error('Error processing payment:', error);\n          alert('Failed to process payment');\n        });\n      }\n    };\n\n    this.state = {\n      studentsWithFines: [],\n      overdueBooks: [],\n      paymentAmount: '',\n      selectedStudent: null,\n      loading: false\n    };\n  }\n\n  componentDidMount() {\n    this.fetchFineData();\n  }\n\n  render() {\n    const _this$state = this.state,\n          studentsWithFines = _this$state.studentsWithFines,\n          overdueBooks = _this$state.overdueBooks,\n          paymentAmount = _this$state.paymentAmount,\n          selectedStudent = _this$state.selectedStudent,\n          loading = _this$state.loading;\n    return React.createElement(\"div\", {\n      className: \"fine-management\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, \"Fine Management\"), loading && React.createElement(\"div\", {\n      className: \"loading\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, \"Loading...\"), React.createElement(\"div\", {\n      className: \"fine-sections\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"section\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, \"Students with Outstanding Fines\"), studentsWithFines.length === 0 ? React.createElement(\"p\", {\n      className: \"no-data\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, \"No outstanding fines\") : React.createElement(\"table\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, \"Student ID\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, \"Student Name\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, \"Fine Amount\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, \"Actions\"))), React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, studentsWithFines.map(student => React.createElement(\"tr\", {\n      key: student.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, student.id), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, student.name), React.createElement(\"td\", {\n      className: \"fine-amount\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, \"$\", student.fine.toFixed(2)), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"pay-btn\",\n      onClick: () => this.setState({\n        selectedStudent: student,\n        paymentAmount: student.fine.toString()\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, \"Pay Fine\"))))))), React.createElement(\"div\", {\n      className: \"section\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, \"Overdue Books (Generating Fines)\"), overdueBooks.length === 0 ? React.createElement(\"p\", {\n      className: \"no-data\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, \"No overdue books\") : React.createElement(\"table\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, \"Student\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, \"Book\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, \"Days Overdue\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, \"Potential Fine\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, \"Deadline\"))), React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, overdueBooks.map((book, index) => React.createElement(\"tr\", {\n      key: index,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, book.studentName), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, book.bookName), React.createElement(\"td\", {\n      className: \"overdue-days\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, book.daysOverdue), React.createElement(\"td\", {\n      className: \"potential-fine\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, \"$\", (Math.max(0, book.daysOverdue - 1) * 10).toFixed(2)), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, new Date(book.deadline).toLocaleDateString()))))))), selectedStudent && React.createElement(\"div\", {\n      className: \"payment-modal\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"modal-content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, \"Process Payment\"), React.createElement(\"div\", {\n      className: \"payment-details\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, \"Student:\"), \" \", selectedStudent.name), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, \"Current Fine:\"), \" $\", selectedStudent.fine.toFixed(2)), React.createElement(\"div\", {\n      className: \"payment-input\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, \"Payment Amount:\"), React.createElement(\"input\", {\n      type: \"number\",\n      step: \"0.01\",\n      max: selectedStudent.fine,\n      value: paymentAmount,\n      onChange: e => this.setState({\n        paymentAmount: e.target.value\n      }),\n      placeholder: \"Enter amount\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"payment-actions\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"process-btn\",\n      onClick: () => this.payFine(selectedStudent.id, selectedStudent.name, selectedStudent.fine),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, \"Process Payment\"), React.createElement(\"button\", {\n      className: \"cancel-btn\",\n      onClick: () => this.setState({\n        selectedStudent: null,\n        paymentAmount: ''\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, \"Cancel\"))))));\n  }\n\n}\n\nexport default FineManagement;","map":{"version":3,"sources":["/Users/sanketbanate/Desktop/Project/Library-Management-System/frontend/src/components/FineManagement/FineManagement.js"],"names":["React","Component","axios","FineManagement","constructor","props","fetchFineData","setState","loading","Promise","all","get","then","finesRes","overdueRes","studentsWithFines","data","overdueBooks","catch","error","console","payFine","studentId","studentName","currentFine","amount","parseFloat","state","paymentAmount","alert","window","confirm","post","response","selectedStudent","componentDidMount","render","length","map","student","id","name","fine","toFixed","toString","book","index","bookName","daysOverdue","Math","max","Date","deadline","toLocaleDateString","e","target","value"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport './FineManagement.css';\n\nclass FineManagement extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            studentsWithFines: [],\n            overdueBooks: [],\n            paymentAmount: '',\n            selectedStudent: null,\n            loading: false\n        };\n    }\n\n    componentDidMount() {\n        this.fetchFineData();\n    }\n\n    fetchFineData = () => {\n        this.setState({ loading: true });\n        Promise.all([\n            axios.get('/api/studentsWithFines'),\n            axios.get('/api/overdueBooks')\n        ])\n        .then(([finesRes, overdueRes]) => {\n            this.setState({\n                studentsWithFines: finesRes.data,\n                overdueBooks: overdueRes.data,\n                loading: false\n            });\n        })\n        .catch(error => {\n            console.error('Error fetching fine data:', error);\n            this.setState({ loading: false });\n        });\n    }\n\n    payFine = (studentId, studentName, currentFine) => {\n        const amount = parseFloat(this.state.paymentAmount);\n        if (!amount || amount <= 0 || amount > currentFine) {\n            alert('Please enter a valid payment amount');\n            return;\n        }\n\n        if (window.confirm(`Process payment of $${amount} for ${studentName}?`)) {\n            axios.post('/api/payFine', { studentId, amount })\n                .then(response => {\n                    alert('Payment processed successfully!');\n                    this.setState({ paymentAmount: '', selectedStudent: null });\n                    this.fetchFineData();\n                })\n                .catch(error => {\n                    console.error('Error processing payment:', error);\n                    alert('Failed to process payment');\n                });\n        }\n    }\n\n    render() {\n        const { studentsWithFines, overdueBooks, paymentAmount, selectedStudent, loading } = this.state;\n\n        return (\n            <div className=\"fine-management\">\n                <h2>Fine Management</h2>\n\n                {loading && <div className=\"loading\">Loading...</div>}\n\n                <div className=\"fine-sections\">\n                    <div className=\"section\">\n                        <h3>Students with Outstanding Fines</h3>\n                        {studentsWithFines.length === 0 ? (\n                            <p className=\"no-data\">No outstanding fines</p>\n                        ) : (\n                            <table>\n                                <thead>\n                                    <tr>\n                                        <th>Student ID</th>\n                                        <th>Student Name</th>\n                                        <th>Fine Amount</th>\n                                        <th>Actions</th>\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                    {studentsWithFines.map(student => (\n                                        <tr key={student.id}>\n                                            <td>{student.id}</td>\n                                            <td>{student.name}</td>\n                                            <td className=\"fine-amount\">${student.fine.toFixed(2)}</td>\n                                            <td>\n                                                <button \n                                                    className=\"pay-btn\"\n                                                    onClick={() => this.setState({ \n                                                        selectedStudent: student,\n                                                        paymentAmount: student.fine.toString()\n                                                    })}\n                                                >\n                                                    Pay Fine\n                                                </button>\n                                            </td>\n                                        </tr>\n                                    ))}\n                                </tbody>\n                            </table>\n                        )}\n                    </div>\n\n                    <div className=\"section\">\n                        <h3>Overdue Books (Generating Fines)</h3>\n                        {overdueBooks.length === 0 ? (\n                            <p className=\"no-data\">No overdue books</p>\n                        ) : (\n                            <table>\n                                <thead>\n                                    <tr>\n                                        <th>Student</th>\n                                        <th>Book</th>\n                                        <th>Days Overdue</th>\n                                        <th>Potential Fine</th>\n                                        <th>Deadline</th>\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                    {overdueBooks.map((book, index) => (\n                                        <tr key={index}>\n                                            <td>{book.studentName}</td>\n                                            <td>{book.bookName}</td>\n                                            <td className=\"overdue-days\">{book.daysOverdue}</td>\n                                            <td className=\"potential-fine\">\n                                                ${(Math.max(0, book.daysOverdue - 1) * 10).toFixed(2)}\n                                            </td>\n                                            <td>{new Date(book.deadline).toLocaleDateString()}</td>\n                                        </tr>\n                                    ))}\n                                </tbody>\n                            </table>\n                        )}\n                    </div>\n                </div>\n\n                {selectedStudent && (\n                    <div className=\"payment-modal\">\n                        <div className=\"modal-content\">\n                            <h3>Process Payment</h3>\n                            <div className=\"payment-details\">\n                                <p><strong>Student:</strong> {selectedStudent.name}</p>\n                                <p><strong>Current Fine:</strong> ${selectedStudent.fine.toFixed(2)}</p>\n                                <div className=\"payment-input\">\n                                    <label>Payment Amount:</label>\n                                    <input\n                                        type=\"number\"\n                                        step=\"0.01\"\n                                        max={selectedStudent.fine}\n                                        value={paymentAmount}\n                                        onChange={(e) => this.setState({ paymentAmount: e.target.value })}\n                                        placeholder=\"Enter amount\"\n                                    />\n                                </div>\n                                <div className=\"payment-actions\">\n                                    <button \n                                        className=\"process-btn\"\n                                        onClick={() => this.payFine(selectedStudent.id, selectedStudent.name, selectedStudent.fine)}\n                                    >\n                                        Process Payment\n                                    </button>\n                                    <button \n                                        className=\"cancel-btn\"\n                                        onClick={() => this.setState({ selectedStudent: null, paymentAmount: '' })}\n                                    >\n                                        Cancel\n                                    </button>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                )}\n            </div>\n        );\n    }\n}\n\nexport default FineManagement;"]},"metadata":{},"sourceType":"module"}
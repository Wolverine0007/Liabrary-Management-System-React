{"ast":null,"code":"var _jsxFileName = \"/Users/sanketbanate/Desktop/Project/Library-Management-System/frontend/src/components/FineManagement/FineManagement.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport './FineManagement.css';\n\nclass FineManagement extends Component {\n  constructor(props) {\n    super(props);\n\n    this.fetchFineData = () => {\n      this.setState({\n        loading: true\n      });\n      Promise.all([axios.get('/api/studentsWithFines'), axios.get('/api/overdueBooks')]).then(([finesRes, overdueRes]) => {\n        this.setState({\n          studentsWithFines: finesRes.data,\n          overdueBooks: overdueRes.data,\n          loading: false\n        });\n      }).catch(error => {\n        console.error('Error fetching fine data:', error);\n        this.setState({\n          loading: false\n        });\n      });\n    };\n\n    this.payFine = (studentId, studentName, currentFine) => {\n      const amount = parseFloat(this.state.paymentAmount);\n\n      if (!amount || amount <= 0 || amount > currentFine) {\n        alert('Please enter a valid payment amount');\n        return;\n      }\n\n      if (window.confirm(`Process payment of ₹${amount} for ${studentName}?`)) {\n        axios.post('/api/payFine', {\n          studentId,\n          amount\n        }).then(response => {\n          alert('Payment processed successfully!');\n          this.setState({\n            paymentAmount: '',\n            selectedStudent: null\n          });\n          this.fetchFineData();\n        }).catch(error => {\n          console.error('Error processing payment:', error);\n          alert('Failed to process payment');\n        });\n      }\n    };\n\n    this.state = {\n      studentsWithFines: [],\n      overdueBooks: [],\n      paymentAmount: '',\n      selectedStudent: null,\n      loading: false\n    };\n  }\n\n  componentDidMount() {\n    this.fetchFineData();\n  }\n\n  render() {\n    const _this$state = this.state,\n          studentsWithFines = _this$state.studentsWithFines,\n          overdueBooks = _this$state.overdueBooks,\n          paymentAmount = _this$state.paymentAmount,\n          selectedStudent = _this$state.selectedStudent,\n          loading = _this$state.loading;\n    return React.createElement(\"div\", {\n      className: \"fine-management\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, \"Fine Management\"), loading && React.createElement(\"div\", {\n      className: \"loading\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, \"Loading...\"), React.createElement(\"div\", {\n      className: \"fine-sections\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"section\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, \"Students with Outstanding Fines\"), studentsWithFines.length === 0 ? React.createElement(\"p\", {\n      className: \"no-data\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, \"No outstanding fines\") : React.createElement(\"table\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, \"Student ID\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, \"Student Name\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, \"Fine Amount\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, \"Actions\"))), React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, studentsWithFines.map(student => React.createElement(\"tr\", {\n      key: student.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, student.id), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, student.name), React.createElement(\"td\", {\n      className: \"fine-amount\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, \"\\u20B9\", (parseFloat(student.fine) || 0).toFixed(2)), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"pay-btn\",\n      onClick: () => this.setState({\n        selectedStudent: student,\n        paymentAmount: (parseFloat(student.fine) || 0).toString()\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, \"Pay Fine\"))))))), React.createElement(\"div\", {\n      className: \"section\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, \"Overdue Books (Generating Fines)\"), overdueBooks.length === 0 ? React.createElement(\"p\", {\n      className: \"no-data\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, \"No overdue books\") : React.createElement(\"table\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, \"Student\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, \"Book\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, \"Days Overdue\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, \"Potential Fine\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, \"Deadline\"))), React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, overdueBooks.map((book, index) => React.createElement(\"tr\", {\n      key: index,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, book.studentName), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, book.bookName), React.createElement(\"td\", {\n      className: \"overdue-days\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, book.daysOverdue), React.createElement(\"td\", {\n      className: \"potential-fine\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, \"\\u20B9\", (Math.max(0, book.daysOverdue - 1) * 10).toFixed(2)), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, new Date(book.deadline).toLocaleDateString()))))))), selectedStudent && React.createElement(\"div\", {\n      className: \"payment-modal\",\n      style: {\n        position: 'fixed',\n        top: 0,\n        left: 0,\n        width: '100%',\n        height: '100%',\n        backgroundColor: 'rgba(0,0,0,0.5)',\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        zIndex: 1000\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"modal-content\",\n      style: {\n        backgroundColor: 'white',\n        padding: '20px',\n        borderRadius: '10px',\n        maxWidth: '600px',\n        width: '90%',\n        maxHeight: '80vh',\n        overflow: 'auto'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        marginBottom: '20px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, \"Process Payment\"), React.createElement(\"button\", {\n      onClick: () => this.setState({\n        selectedStudent: null,\n        paymentAmount: ''\n      }),\n      style: {\n        background: 'none',\n        border: 'none',\n        fontSize: '24px',\n        cursor: 'pointer',\n        color: '#999'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, \"\\xD7\")), React.createElement(\"div\", {\n      className: \"payment-details\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, \"Student:\"), \" \", selectedStudent.name), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, \"Current Fine:\"), \" \\u20B9\", (parseFloat(selectedStudent.fine) || 0).toFixed(2)), React.createElement(\"div\", {\n      className: \"payment-input\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }, \"Payment Amount:\"), React.createElement(\"input\", {\n      type: \"number\",\n      step: \"0.01\",\n      max: parseFloat(selectedStudent.fine) || 0,\n      value: paymentAmount,\n      onChange: e => this.setState({\n        paymentAmount: e.target.value\n      }),\n      placeholder: \"Enter amount\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"payment-methods\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    }, \"Payment Options\"), React.createElement(\"div\", {\n      className: \"upi-payment\",\n      style: {\n        marginBottom: '20px',\n        padding: '15px',\n        border: '1px solid #ddd',\n        borderRadius: '8px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    }, React.createElement(\"h5\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }, \"UPI Payment\"), React.createElement(\"div\", {\n      className: \"upi-options\",\n      style: {\n        display: 'flex',\n        gap: '20px',\n        flexWrap: 'wrap'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"upi-qr\",\n      style: {\n        textAlign: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }, \"Scan QR Code:\"), React.createElement(\"img\", {\n      src: `https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=upi://pay?pa=8275152241@ibl&pn=MIT%20Library&am=${paymentAmount || 0}&cu=INR&tn=Fine%20Payment%20Student%20${selectedStudent.id}`,\n      alt: \"UPI QR Code\",\n      style: {\n        border: '1px solid #ddd',\n        padding: '10px'\n      },\n      onError: e => {\n        e.target.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTUwIiBoZWlnaHQ9IjE1MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZGRkIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkVycm9yIExvYWRpbmcgUVI8L3RleHQ+PC9zdmc+';\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"upi-links\",\n      style: {\n        flex: 1,\n        minWidth: '200px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212\n      },\n      __self: this\n    }, \"Or click to pay:\"), React.createElement(\"div\", {\n      className: \"upi-apps\",\n      style: {\n        display: 'flex',\n        flexDirection: 'column',\n        gap: '10px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      href: `upi://pay?pa=8275152241@ibl&pn=MIT%20Library&am=${paymentAmount || 0}&cu=INR&tn=Fine%20Payment%20Student%20${selectedStudent.id}`,\n      className: \"upi-link paytm\",\n      style: {\n        margin: '5px',\n        padding: '8px 15px',\n        backgroundColor: '#00BAF2',\n        color: 'white',\n        textDecoration: 'none',\n        borderRadius: '5px',\n        display: 'inline-block'\n      },\n      onClick: e => {\n        if (!paymentAmount || paymentAmount <= 0) {\n          e.preventDefault();\n          alert('Please enter a valid payment amount');\n        }\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214\n      },\n      __self: this\n    }, \"PayTM\"), React.createElement(\"a\", {\n      href: `upi://pay?pa=8275152241@ibl&pn=MIT%20Library&am=${paymentAmount || 0}&cu=INR&tn=Fine%20Payment%20Student%20${selectedStudent.id}`,\n      className: \"upi-link gpay\",\n      style: {\n        margin: '5px',\n        padding: '8px 15px',\n        backgroundColor: '#4285F4',\n        color: 'white',\n        textDecoration: 'none',\n        borderRadius: '5px',\n        display: 'inline-block'\n      },\n      onClick: e => {\n        if (!paymentAmount || paymentAmount <= 0) {\n          e.preventDefault();\n          alert('Please enter a valid payment amount');\n        }\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227\n      },\n      __self: this\n    }, \"Google Pay\"), React.createElement(\"a\", {\n      href: `upi://pay?pa=8275152241@ibl&pn=MIT%20Library&am=${paymentAmount || 0}&cu=INR&tn=Fine%20Payment%20Student%20${selectedStudent.id}`,\n      className: \"upi-link phonepe\",\n      style: {\n        margin: '5px',\n        padding: '8px 15px',\n        backgroundColor: '#5F259F',\n        color: 'white',\n        textDecoration: 'none',\n        borderRadius: '5px',\n        display: 'inline-block'\n      },\n      onClick: e => {\n        if (!paymentAmount || paymentAmount <= 0) {\n          e.preventDefault();\n          alert('Please enter a valid payment amount');\n        }\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240\n      },\n      __self: this\n    }, \"PhonePe\")))), React.createElement(\"div\", {\n      className: \"upi-details\",\n      style: {\n        marginTop: '15px',\n        padding: '10px',\n        backgroundColor: '#f8f9fa',\n        borderRadius: '5px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257\n      },\n      __self: this\n    }, \"UPI ID:\"), \" 8275152241@ibl\"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258\n      },\n      __self: this\n    }, \"Amount:\"), \" \\u20B9\", paymentAmount || 0), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259\n      },\n      __self: this\n    }, \"Reference:\"), \" Student ID \", selectedStudent.id, \" - \", selectedStudent.name))), React.createElement(\"div\", {\n      className: \"manual-payment\",\n      style: {\n        marginTop: '20px',\n        borderTop: '1px solid #ddd',\n        paddingTop: '15px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263\n      },\n      __self: this\n    }, React.createElement(\"h5\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264\n      },\n      __self: this\n    }, \"Manual Payment Confirmation\"), React.createElement(\"p\", {\n      style: {\n        fontSize: '14px',\n        color: '#666'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265\n      },\n      __self: this\n    }, \"After making the UPI payment, click below to mark as paid:\"), React.createElement(\"div\", {\n      className: \"payment-actions\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"process-btn\",\n      onClick: () => this.payFine(selectedStudent.id, selectedStudent.name, parseFloat(selectedStudent.fine) || 0),\n      style: {\n        backgroundColor: '#28a745',\n        color: 'white',\n        padding: '10px 20px',\n        border: 'none',\n        borderRadius: '5px',\n        marginRight: '10px',\n        cursor: 'pointer'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267\n      },\n      __self: this\n    }, \"Mark as Paid\"), React.createElement(\"button\", {\n      className: \"cancel-btn\",\n      onClick: () => this.setState({\n        selectedStudent: null,\n        paymentAmount: ''\n      }),\n      style: {\n        backgroundColor: '#6c757d',\n        color: 'white',\n        padding: '10px 20px',\n        border: 'none',\n        borderRadius: '5px',\n        cursor: 'pointer'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274\n      },\n      __self: this\n    }, \"Cancel\"))))))));\n  }\n\n}\n\nexport default FineManagement;","map":{"version":3,"sources":["/Users/sanketbanate/Desktop/Project/Library-Management-System/frontend/src/components/FineManagement/FineManagement.js"],"names":["React","Component","axios","FineManagement","constructor","props","fetchFineData","setState","loading","Promise","all","get","then","finesRes","overdueRes","studentsWithFines","data","overdueBooks","catch","error","console","payFine","studentId","studentName","currentFine","amount","parseFloat","state","paymentAmount","alert","window","confirm","post","response","selectedStudent","componentDidMount","render","length","map","student","id","name","fine","toFixed","toString","book","index","bookName","daysOverdue","Math","max","Date","deadline","toLocaleDateString","position","top","left","width","height","backgroundColor","display","justifyContent","alignItems","zIndex","padding","borderRadius","maxWidth","maxHeight","overflow","marginBottom","background","border","fontSize","cursor","color","e","target","value","gap","flexWrap","textAlign","src","flex","minWidth","flexDirection","margin","textDecoration","preventDefault","marginTop","borderTop","paddingTop","marginRight"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport './FineManagement.css';\n\nclass FineManagement extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            studentsWithFines: [],\n            overdueBooks: [],\n            paymentAmount: '',\n            selectedStudent: null,\n            loading: false\n        };\n    }\n\n    componentDidMount() {\n        this.fetchFineData();\n    }\n\n    fetchFineData = () => {\n        this.setState({ loading: true });\n        Promise.all([\n            axios.get('/api/studentsWithFines'),\n            axios.get('/api/overdueBooks')\n        ])\n        .then(([finesRes, overdueRes]) => {\n            this.setState({\n                studentsWithFines: finesRes.data,\n                overdueBooks: overdueRes.data,\n                loading: false\n            });\n        })\n        .catch(error => {\n            console.error('Error fetching fine data:', error);\n            this.setState({ loading: false });\n        });\n    }\n\n    payFine = (studentId, studentName, currentFine) => {\n        const amount = parseFloat(this.state.paymentAmount);\n        if (!amount || amount <= 0 || amount > currentFine) {\n            alert('Please enter a valid payment amount');\n            return;\n        }\n\n        if (window.confirm(`Process payment of ₹${amount} for ${studentName}?`)) {\n            axios.post('/api/payFine', { studentId, amount })\n                .then(response => {\n                    alert('Payment processed successfully!');\n                    this.setState({ paymentAmount: '', selectedStudent: null });\n                    this.fetchFineData();\n                })\n                .catch(error => {\n                    console.error('Error processing payment:', error);\n                    alert('Failed to process payment');\n                });\n        }\n    }\n\n    render() {\n        const { studentsWithFines, overdueBooks, paymentAmount, selectedStudent, loading } = this.state;\n\n        return (\n            <div className=\"fine-management\">\n                <h2>Fine Management</h2>\n\n                {loading && <div className=\"loading\">Loading...</div>}\n\n                <div className=\"fine-sections\">\n                    <div className=\"section\">\n                        <h3>Students with Outstanding Fines</h3>\n                        {studentsWithFines.length === 0 ? (\n                            <p className=\"no-data\">No outstanding fines</p>\n                        ) : (\n                            <table>\n                                <thead>\n                                    <tr>\n                                        <th>Student ID</th>\n                                        <th>Student Name</th>\n                                        <th>Fine Amount</th>\n                                        <th>Actions</th>\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                    {studentsWithFines.map(student => (\n                                        <tr key={student.id}>\n                                            <td>{student.id}</td>\n                                            <td>{student.name}</td>\n                                            <td className=\"fine-amount\">₹{(parseFloat(student.fine) || 0).toFixed(2)}</td>\n                                            <td>\n                                                <button \n                                                    className=\"pay-btn\"\n                                                    onClick={() => this.setState({ \n                                                        selectedStudent: student,\n                                                        paymentAmount: (parseFloat(student.fine) || 0).toString()\n                                                    })}\n                                                >\n                                                    Pay Fine\n                                                </button>\n                                            </td>\n                                        </tr>\n                                    ))}\n                                </tbody>\n                            </table>\n                        )}\n                    </div>\n\n                    <div className=\"section\">\n                        <h3>Overdue Books (Generating Fines)</h3>\n                        {overdueBooks.length === 0 ? (\n                            <p className=\"no-data\">No overdue books</p>\n                        ) : (\n                            <table>\n                                <thead>\n                                    <tr>\n                                        <th>Student</th>\n                                        <th>Book</th>\n                                        <th>Days Overdue</th>\n                                        <th>Potential Fine</th>\n                                        <th>Deadline</th>\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                    {overdueBooks.map((book, index) => (\n                                        <tr key={index}>\n                                            <td>{book.studentName}</td>\n                                            <td>{book.bookName}</td>\n                                            <td className=\"overdue-days\">{book.daysOverdue}</td>\n                                            <td className=\"potential-fine\">\n                                                ₹{(Math.max(0, book.daysOverdue - 1) * 10).toFixed(2)}\n                                            </td>\n                                            <td>{new Date(book.deadline).toLocaleDateString()}</td>\n                                        </tr>\n                                    ))}\n                                </tbody>\n                            </table>\n                        )}\n                    </div>\n                </div>\n\n                {selectedStudent && (\n                    <div className=\"payment-modal\" style={{\n                        position: 'fixed',\n                        top: 0,\n                        left: 0,\n                        width: '100%',\n                        height: '100%',\n                        backgroundColor: 'rgba(0,0,0,0.5)',\n                        display: 'flex',\n                        justifyContent: 'center',\n                        alignItems: 'center',\n                        zIndex: 1000\n                    }}>\n                        <div className=\"modal-content\" style={{\n                            backgroundColor: 'white',\n                            padding: '20px',\n                            borderRadius: '10px',\n                            maxWidth: '600px',\n                            width: '90%',\n                            maxHeight: '80vh',\n                            overflow: 'auto'\n                        }}>\n                            <div style={{display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '20px'}}>\n                                <h3>Process Payment</h3>\n                                <button \n                                    onClick={() => this.setState({ selectedStudent: null, paymentAmount: '' })}\n                                    style={{\n                                        background: 'none',\n                                        border: 'none',\n                                        fontSize: '24px',\n                                        cursor: 'pointer',\n                                        color: '#999'\n                                    }}\n                                >\n                                    ×\n                                </button>\n                            </div>\n                            <div className=\"payment-details\">\n                                <p><strong>Student:</strong> {selectedStudent.name}</p>\n                                <p><strong>Current Fine:</strong> ₹{(parseFloat(selectedStudent.fine) || 0).toFixed(2)}</p>\n                                <div className=\"payment-input\">\n                                    <label>Payment Amount:</label>\n                                    <input\n                                        type=\"number\"\n                                        step=\"0.01\"\n                                        max={parseFloat(selectedStudent.fine) || 0}\n                                        value={paymentAmount}\n                                        onChange={(e) => this.setState({ paymentAmount: e.target.value })}\n                                        placeholder=\"Enter amount\"\n                                    />\n                                </div>\n                                <div className=\"payment-methods\">\n                                    <h4>Payment Options</h4>\n                                    \n                                    {/* UPI Payment Section */}\n                                    <div className=\"upi-payment\" style={{marginBottom: '20px', padding: '15px', border: '1px solid #ddd', borderRadius: '8px'}}>\n                                        <h5>UPI Payment</h5>\n                                        <div className=\"upi-options\" style={{display: 'flex', gap: '20px', flexWrap: 'wrap'}}>\n                                            <div className=\"upi-qr\" style={{textAlign: 'center'}}>\n                                                <p>Scan QR Code:</p>\n                                                <img \n                                                    src={`https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=upi://pay?pa=8275152241@ibl&pn=MIT%20Library&am=${paymentAmount || 0}&cu=INR&tn=Fine%20Payment%20Student%20${selectedStudent.id}`}\n                                                    alt=\"UPI QR Code\"\n                                                    style={{border: '1px solid #ddd', padding: '10px'}}\n                                                    onError={(e) => {\n                                                        e.target.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTUwIiBoZWlnaHQ9IjE1MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZGRkIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkVycm9yIExvYWRpbmcgUVI8L3RleHQ+PC9zdmc+';\n                                                    }}\n                                                />\n                                            </div>\n                                            <div className=\"upi-links\" style={{flex: 1, minWidth: '200px'}}>\n                                                <p>Or click to pay:</p>\n                                                <div className=\"upi-apps\" style={{display: 'flex', flexDirection: 'column', gap: '10px'}}>\n                                                    <a \n                                                        href={`upi://pay?pa=8275152241@ibl&pn=MIT%20Library&am=${paymentAmount || 0}&cu=INR&tn=Fine%20Payment%20Student%20${selectedStudent.id}`}\n                                                        className=\"upi-link paytm\"\n                                                        style={{margin: '5px', padding: '8px 15px', backgroundColor: '#00BAF2', color: 'white', textDecoration: 'none', borderRadius: '5px', display: 'inline-block'}}\n                                                        onClick={(e) => {\n                                                            if (!paymentAmount || paymentAmount <= 0) {\n                                                                e.preventDefault();\n                                                                alert('Please enter a valid payment amount');\n                                                            }\n                                                        }}\n                                                    >\n                                                        PayTM\n                                                    </a>\n                                                    <a \n                                                        href={`upi://pay?pa=8275152241@ibl&pn=MIT%20Library&am=${paymentAmount || 0}&cu=INR&tn=Fine%20Payment%20Student%20${selectedStudent.id}`}\n                                                        className=\"upi-link gpay\"\n                                                        style={{margin: '5px', padding: '8px 15px', backgroundColor: '#4285F4', color: 'white', textDecoration: 'none', borderRadius: '5px', display: 'inline-block'}}\n                                                        onClick={(e) => {\n                                                            if (!paymentAmount || paymentAmount <= 0) {\n                                                                e.preventDefault();\n                                                                alert('Please enter a valid payment amount');\n                                                            }\n                                                        }}\n                                                    >\n                                                        Google Pay\n                                                    </a>\n                                                    <a \n                                                        href={`upi://pay?pa=8275152241@ibl&pn=MIT%20Library&am=${paymentAmount || 0}&cu=INR&tn=Fine%20Payment%20Student%20${selectedStudent.id}`}\n                                                        className=\"upi-link phonepe\"\n                                                        style={{margin: '5px', padding: '8px 15px', backgroundColor: '#5F259F', color: 'white', textDecoration: 'none', borderRadius: '5px', display: 'inline-block'}}\n                                                        onClick={(e) => {\n                                                            if (!paymentAmount || paymentAmount <= 0) {\n                                                                e.preventDefault();\n                                                                alert('Please enter a valid payment amount');\n                                                            }\n                                                        }}\n                                                    >\n                                                        PhonePe\n                                                    </a>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div className=\"upi-details\" style={{marginTop: '15px', padding: '10px', backgroundColor: '#f8f9fa', borderRadius: '5px'}}>\n                                            <p><strong>UPI ID:</strong> 8275152241@ibl</p>\n                                            <p><strong>Amount:</strong> ₹{paymentAmount || 0}</p>\n                                            <p><strong>Reference:</strong> Student ID {selectedStudent.id} - {selectedStudent.name}</p>\n                                        </div>\n                                    </div>\n                                    \n                                    <div className=\"manual-payment\" style={{marginTop: '20px', borderTop: '1px solid #ddd', paddingTop: '15px'}}>\n                                        <h5>Manual Payment Confirmation</h5>\n                                        <p style={{fontSize: '14px', color: '#666'}}>After making the UPI payment, click below to mark as paid:</p>\n                                        <div className=\"payment-actions\">\n                                            <button \n                                                className=\"process-btn\"\n                                                onClick={() => this.payFine(selectedStudent.id, selectedStudent.name, parseFloat(selectedStudent.fine) || 0)}\n                                                style={{backgroundColor: '#28a745', color: 'white', padding: '10px 20px', border: 'none', borderRadius: '5px', marginRight: '10px', cursor: 'pointer'}}\n                                            >\n                                                Mark as Paid\n                                            </button>\n                                            <button \n                                                className=\"cancel-btn\"\n                                                onClick={() => this.setState({ selectedStudent: null, paymentAmount: '' })}\n                                                style={{backgroundColor: '#6c757d', color: 'white', padding: '10px 20px', border: 'none', borderRadius: '5px', cursor: 'pointer'}}\n                                            >\n                                                Cancel\n                                            </button>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                )}\n            </div>\n        );\n    }\n}\n\nexport default FineManagement;"]},"metadata":{},"sourceType":"module"}